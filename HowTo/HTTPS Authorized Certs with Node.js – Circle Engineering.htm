<!DOCTYPE html>
<!-- saved from url=(0079)https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2 -->
<html xmlns:cc="http://creativecommons.org/ns#"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>HTTPS Authorized Certs with Node.js – Circle Engineering</title><link rel="canonical" href="https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2"><meta name="title" content="HTTPS Authorized Certs with Node.js – Circle Engineering"><meta name="referrer" content="always"><meta name="description" content="If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we could quickly add client x.509 certificate checking in just…"><meta property="og:title" content="HTTPS Authorized Certs with Node.js – Circle Engineering"><meta property="og:url" content="https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we…"><meta name="twitter:description" content="If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we…"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://engineering.circle.com/@anders94"><meta property="author" content="Anders Brownworth"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta property="article:publisher" content="https://www.facebook.com/circlepay"><meta property="article:author" content="Anders Brownworth"><meta property="fb:smart_publish:robots" content="noauto"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2015-02-03T18:00:08.000Z"><meta name="twitter:creator" content="@anders94"><meta name="twitter:site" content="@circleeng"><meta property="og:site_name" content="Circle Engineering"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="5 min read"><script type="text/javascript" async="" src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/ga.js"></script><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1920,"height":534,"url":"https://cdn-images-1.medium.com/max/2000/1*5ztbgEt4NqpVaxTc64C-XA.png"},"datePublished":"2015-02-03T18:00:08.000Z","dateModified":"2016-05-02T23:32:01.230Z","headline":"HTTPS Authorized Certs with Node.js","name":"HTTPS Authorized Certs with Node.js","keywords":["Nodejs","JavaScript"],"author":{"@type":"Person","name":"Anders Brownworth","url":"https://engineering.circle.com/@anders94"},"creator":["Anders Brownworth"],"publisher":{"@type":"Organization","name":"Circle Engineering","url":"https://engineering.circle.com","logo":{"@type":"ImageObject","width":215,"height":60,"url":"https://cdn-images-1.medium.com/max/430/1*5ztbgEt4NqpVaxTc64C-XA.png"}},"mainEntityOfPage":"https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2"}</script><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/315e548354a2"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/315e548354a2"><meta property="al:android:url" content="medium://p/315e548354a2"><meta property="al:web:url" content="https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://engineering.circle.com/osd.xml"><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/315e548354a2"><meta name="theme-color" content="#000000"><link rel="stylesheet" type="text/css" href="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css"><link rel="stylesheet" href="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/main-base.g2e09PlZK_j3Lw2AgNmbfQ.css"><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-24232453-2"]); _gaq.push(["_setDomainName", window.location.hostname]); _gaq.push(["_setAllowLinker", true]); _gaq.push(["_trackPageview"]);_asyncScript(("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js");(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-images-1.medium.com/fit/c/256/256/1*Sohlrcl_aYcw8jQ3-KLEKw.png" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*Sohlrcl_aYcw8jQ3-KLEKw.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*Sohlrcl_aYcw8jQ3-KLEKw.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*Sohlrcl_aYcw8jQ3-KLEKw.png"><link rel="apple-touch-icon" sizes="60x60" href="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-Sohlrcl_aYcw8jQ3-KLEKw.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg" color="#171717"></head><body itemscope="" class="postShowScreen browser-chrome os-mac is-withMagicUnderlines is-js" data-action-scope="_actionscope_0"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main surface-container" id="container"><div class="butterBar butterBar--error" data-action-scope="_actionscope_1"></div><div class="surface" id="_obv.shell._surface_1492314235697" style="display: block; visibility: visible;"><div class="screenContent surface-content is-supplementalPostContentLoaded" data-used="true" data-action-scope="_actionscope_2"><canvas class="canvas-renderer" width="840" height="854"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"><div class="notesMarkers" data-action-scope="_actionscope_4"></div></div><div class="metabar u-clearfix js-metabar u-textColorTransparentWhiteDarker u-tintBgColor u-tintSpectrum is-hiddenWhenMinimized is-maximized"><div class="metabar-inner u-marginAuto u-maxWidth1000 u-paddingLeft20 u-paddingRight20 js-metabarMiddle"><div class="metabar-block metabar-block--left u-floatLeft u-height65 u-xs-height56"><div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56 u-marginRight18"><div class="u-alignBlock"><a class="js-logCollection" href="https://engineering.circle.com/?source=logo-lo_fc0a5265417---d28865909d24"><span class="u-uiTextBold u-fontSize18 u-lineHeight18 u-xs-fontSize22 u-xs-lineHeight22 u-xs-noWrapWithEllipsis u-inlineBlock u-xs-maxWidth200">Circle Engineering</span></a></div></div><div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56 u-xs-hide"><div class="u-alignBlock"><div class="buttonSet u-lineHeightInherit u-marginLeft0"><div class="buttonSet-inner"><button class="button button--primary u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton is-smallPill" data-action="sign-in-prompt" data-sign-in-action="toggle-follow-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/circle-engineering" data-collection-id="d28865909d24"><span class="button-label  js-buttonLabel">Follow</span></button></div><a class="button button--light button--chromeless is-touchIconBlackPulse u-baseColor--buttonLight button--withIcon button--withSvgIcon" href="https://twitter.com/circleeng" title="Visit “Circle Engineering” on Twitter" aria-label="Visit “Circle Engineering” on Twitter" rel="me" target="_blank"><span class="button-defaultState"><span class="svgIcon svgIcon--twitterFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M21.725 5.338c-.744.47-1.605.804-2.513 1.006a3.978 3.978 0 0 0-2.942-1.293c-2.22 0-4.02 1.81-4.02 4.02 0 .32.034.63.07.94-3.31-.18-6.27-1.78-8.255-4.23a4.544 4.544 0 0 0-.574 2.01c.04 1.43.74 2.66 1.8 3.38-.63-.01-1.25-.19-1.79-.5v.08c0 1.93 1.38 3.56 3.23 3.95-.34.07-.7.12-1.07.14-.25-.02-.5-.04-.72-.07.49 1.58 1.97 2.74 3.74 2.8a8.49 8.49 0 0 1-5.02 1.72c-.3-.03-.62-.04-.93-.07A11.447 11.447 0 0 0 8.88 21c7.386 0 11.43-6.13 11.414-11.414.015-.21.01-.38 0-.578a7.604 7.604 0 0 0 2.01-2.08 7.27 7.27 0 0 1-2.297.645 3.856 3.856 0 0 0 1.72-2.23"></path></svg></span></span></a><a class="button button--light button--chromeless is-touchIconBlackPulse u-baseColor--buttonLight button--withIcon button--withSvgIcon u-paddingLeft0" href="https://facebook.com/circlepay" title="Visit “Circle Engineering” on Facebook" aria-label="Visit “Circle Engineering” on Facebook" rel="me" target="_blank"><span class="button-defaultState"><span class="svgIcon svgIcon--facebookFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M21 12.646C21 7.65 16.97 3.6 12 3.6s-9 4.05-9 9.046a9.026 9.026 0 0 0 7.59 8.924v-6.376H8.395V12.64h2.193v-1.88c0-2.186 1.328-3.375 3.267-3.375.93 0 1.728.07 1.96.1V9.77H14.47c-1.055 0-1.26.503-1.26 1.242v1.63h2.517l-.33 2.554H13.21V21.6c4.398-.597 7.79-4.373 7.79-8.954"></path></svg></span></span></a></div></div></div></div><div class="metabar-block u-floatRight u-xs-absolute u-xs-textAlignRight u-xs-right0 u-xs-marginRight20 u-height65 u-xs-height56"><div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56"><div class="u-alignBlock"><div class="buttonSet u-lineHeightInherit"><a class="button button--primary button--light button--chromeless u-accentColor--buttonNormal is-inSiteNavBar u-lineHeight30 u-height32" href="https://medium.com/m/signin?redirect=https%3A%2F%2Fengineering.circle.com%2Fhttps-authorized-certs-with-node-js-315e548354a2" data-action="sign-in-prompt" data-redirect="https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2" data-action-source="nav_signup">Sign in / Sign up</a></div></div></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-tintBgColor u-height65 u-xs-height56"></div><main role="main"><article class=" u-sizeViewHeightMin100 u-overflowHidden postArticle postArticle--full is-withAccentColors u-marginBottom40" lang="en" data-scroll="native"><header class="container u-maxWidth740"><div class="postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="postMetaLockup postMetaLockup--authorWithBio u-flex js-postMetaLockup"><div class="u-flex0"><a class="link avatar u-baseColor--link" href="https://engineering.circle.com/@anders94?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="8f1080f36160" data-action-type="hover" data-user-id="8f1080f36160" data-collection-slug="circle-engineering" dir="auto"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-s2mHdFZ_LvU4XAwq8GckGQ.jpeg" class="avatar-image avatar-image--small" alt="Go to the profile of Anders Brownworth"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><a class="link link link--darken link--darker u-baseColor--link" href="https://engineering.circle.com/@anders94?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="8f1080f36160" data-action-type="hover" data-user-id="8f1080f36160" data-collection-slug="circle-engineering" dir="auto">Anders Brownworth</a><span class="followState js-followState buttonSet-inner" data-user-id="8f1080f36160"><button class="button u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-marginTopNegative2 u-xs-hide" data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-marginTopNegative2 u-xs-hide" data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/8f1080f36160" data-action-source="post_header_lockup_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span><div class="postMetaInline u-noWrapWithEllipsis u-xs-normalWrap u-xs-lineClamp2">Rethinking money @CirclePay | Co-taught the Blockchain class at MIT | Podcaster | Runner | Helicopter Pilot</div><div class="postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2015-02-03T18:00:08.000Z">Feb 3, 2015</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="5 min read"></span></div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource js-trackedPost" data-post-id="315e548354a2" data-source="post_page" data-collection-id="d28865909d24" data-tracking-context="postPage" data-scroll="native"><section name="72d8" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="2bb9" id="2bb9" class="graf graf--h3 graf--leading graf--title">HTTPS Authorized Certs with&nbsp;Node.js</h1><p name="8b7a" id="8b7a" class="graf graf--p graf-after--h3">If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we could quickly add client x.509 certificate checking in just a few lines of code.</p><p name="6ad8" id="6ad8" class="graf graf--p graf-after--p">Typically, HTTPS servers do a basic TLS handshake and accept any client connection as long as a compatible cipher suite can be found. However, the server can be configured to challenge the client with a <strong class="markup--strong markup--p-strong">CertificateRequest</strong> during the TLS handshake. This forces the client to present a valid certificate before the negotiation can continue. This strategy can be used in API services instead of (or in addition to) another form of identity such as shared secrets or OAuth.</p><p name="11b7" id="11b7" class="graf graf--p graf-after--p">Here’s some background on how <a href="http://en.wikipedia.org/wiki/Transport_Layer_Security#Client-authenticated_TLS_handshake" data-href="http://en.wikipedia.org/wiki/Transport_Layer_Security#Client-authenticated_TLS_handshake" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Client-authenticated TLS Handshakes</a> work over at Wikipedia.</p><h3 name="8947" id="8947" class="graf graf--h3 graf-after--p">From Scratch</h3><p name="8c74" id="8c74" class="graf graf--p graf-after--h3">Let’s walk through the process of creating certificates and build an HTTPS server and client to use them. First we’ll build a Certificate Authority to sign our own client certificates. (let’s also use it to sign our server certificate so we don’t have to pay a public certificate authority!)</p><p name="077b" id="077b" class="graf graf--p graf-after--p">To simplify the configuration, let’s grab the following CA configuration file.</p><pre name="476b" id="476b" class="graf graf--pre graf-after--p">wget <a href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/ca.cnf" data-href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/ca.cnf" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/ca.cnf</a></pre><p name="aa44" id="aa44" class="graf graf--p graf-after--pre">Next, we’ll create a new certificate authority using this configuration.</p><pre name="49ac" id="49ac" class="graf graf--pre graf-after--p">openssl req -new -x509 -days 9999 -config ca.cnf -keyout ca-key.pem -out ca-crt.pem</pre><p name="47b2" id="47b2" class="graf graf--p graf-after--pre">Now that we have our certificate authority in <em class="markup--em markup--p-em">ca-key.pem</em> and <em class="markup--em markup--p-em">ca-crt.pem</em>, let’s generate a private key for the server.</p><pre name="95a5" id="95a5" class="graf graf--pre graf-after--p">openssl genrsa -out server-key.pem 4096</pre><p name="78aa" id="78aa" class="graf graf--p graf-after--pre">Our next move is to generate a certificate signing request. Again to simplify configuration, let’s use <em class="markup--em markup--p-em">server.cnf</em> as a configuration shortcut.</p><pre name="d589" id="d589" class="graf graf--pre graf-after--p">wget <a href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/server.cnf" data-href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/server.cnf" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/server.cnf</a></pre><p name="0b21" id="0b21" class="graf graf--p graf-after--pre">Now we’ll generate the certificate signing request.</p><pre name="864c" id="864c" class="graf graf--pre graf-after--p">openssl req -new -config server.cnf -key server-key.pem -out server-csr.pem</pre><p name="6be9" id="6be9" class="graf graf--p graf-after--pre">Now let’s sign the request.</p><pre name="bddc" id="bddc" class="graf graf--pre graf-after--p">openssl x509 -req -extfile server.cnf -days 999 -passin "pass:password" -in server-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out server-crt.pem</pre><p name="b76a" id="b76a" class="graf graf--p graf-after--pre">Our server certificate is all set and ready to go!</p><h3 name="c962" id="c962" class="graf graf--h3 graf-after--p">Server</h3><p name="6c7b" id="6c7b" class="graf graf--p graf-after--h3">Next, let’s build a basic HTTPS server using the certificate and listen on 0.0.0.0:4433. This is your standard HTTPS server in Node.js.</p><pre name="f00a" id="f00a" class="graf graf--pre graf-after--p">var fs = require('fs'); <br>var https = require('https'); <br>var options = { <br>    key: fs.readFileSync('server-key.pem'), <br>    cert: fs.readFileSync('server-crt.pem'), <br>    ca: fs.readFileSync('ca-crt.pem'), <br>}; </pre><pre name="e567" id="e567" class="graf graf--pre graf-after--pre">https.createServer(options, function (req, res) { <br>    console.log(new Date()+' '+ <br>        req.connection.remoteAddress+' '+ <br>        req.method+' '+req.url); <br>    res.writeHead(200); <br>    res.end("hello world\n"); <br>}).listen(4433);</pre><p name="4dcf" id="4dcf" class="graf graf--p graf-after--pre">You can check that this works in a browser. (don’t forget to tell your operating system to trust our newly created certificate authority by installing <em class="markup--em markup--p-em">ca-crt.pem</em> and marking it as trusted)</p><h3 name="e773" id="e773" class="graf graf--h3 graf-after--p">Client</h3><p name="741f" id="741f" class="graf graf--p graf-after--h3">Let’s create a Node.js client to connect to the server because that’s where we will be demonstrating the client certificate stuff.</p><pre name="d9a2" id="d9a2" class="graf graf--pre graf-after--p">var fs = require('fs'); <br>var https = require('https'); </pre><pre name="4adb" id="4adb" class="graf graf--pre graf-after--pre">var options = { <br>    hostname: 'localhost', <br>    port: 4433, <br>    path: '/', <br>    method: 'GET', <br>    ca: fs.readFileSync('ca-crt.pem') <br>}; </pre><pre name="2302" id="2302" class="graf graf--pre graf-after--pre">var req = https.request(options, function(res) { <br>    res.on('data', function(data) { <br>        process.stdout.write(data); <br>    }); <br>}); </pre><pre name="b40d" id="b40d" class="graf graf--pre graf-after--pre">req.end();</pre><p name="46eb" id="46eb" class="graf graf--p graf-after--pre">See what we did there? We added a line to the options that sets the certificate authority that the client will trust to our certificate authority’s public key. You can test that this works by running it and hopefully seeing “hello world” returned back.</p><h3 name="9cac" id="9cac" class="graf graf--h3 graf-after--p">Client Certificates</h3><p name="289b" id="289b" class="graf graf--p graf-after--h3">Now, for the certificate on the client side, we’re going to need something that the client can present to our new server. Let’s make two of them while we’re at it.</p><pre name="2473" id="2473" class="graf graf--pre graf-after--p">openssl genrsa -out client1-key.pem 4096</pre><pre name="378f" id="378f" class="graf graf--pre graf-after--pre">openssl genrsa -out client2-key.pem 4096</pre><p name="20b0" id="20b0" class="graf graf--p graf-after--pre">We’ll use config files again to save us some typing.</p><pre name="6f15" id="6f15" class="graf graf--pre graf-after--p">wget <a href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client1.cnf" data-href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client1.cnf" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client1.cnf</a></pre><pre name="b026" id="b026" class="graf graf--pre graf-after--pre">wget <a href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client2.cnf" data-href="https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client2.cnf" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client2.cnf</a></pre><p name="f39a" id="f39a" class="graf graf--p graf-after--pre">Now let’s create a pair of certificate signing requests.</p><pre name="3e02" id="3e02" class="graf graf--pre graf-after--p">openssl req -new -config client1.cnf -key client1-key.pem -out client1-csr.pem</pre><pre name="edcc" id="edcc" class="graf graf--pre graf-after--pre">openssl req -new -config client2.cnf -key client2-key.pem -out client2-csr.pem</pre><p name="28d2" id="28d2" class="graf graf--p graf-after--pre">And sign our two new client certs.</p><pre name="c1ce" id="c1ce" class="graf graf--pre graf-after--p">openssl x509 -req -extfile client1.cnf -days 999 -passin "pass:password" -in client1-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out client1-crt.pem</pre><pre name="2cdd" id="2cdd" class="graf graf--pre graf-after--pre">openssl x509 -req -extfile client2.cnf -days 999 -passin "pass:password" -in client2-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out client2-crt.pem</pre><p name="ffc5" id="ffc5" class="graf graf--p graf-after--pre">Just to make sure everything in the OpenSSL world worked as expected, let’s verify our certs. (you can do this with the server certificate as well if you like)</p><pre name="a93d" id="a93d" class="graf graf--pre graf-after--p">openssl verify -CAfile ca-crt.pem client1-crt.pem</pre><pre name="b9f2" id="b9f2" class="graf graf--pre graf-after--pre">openssl verify -CAfile ca-crt.pem client2-crt.pem</pre><p name="7901" id="7901" class="graf graf--p graf-after--pre">We should get an “OK” if all is well.</p><h3 name="1889" id="1889" class="graf graf--h3 graf-after--p">Putting it all&nbsp;Together</h3><p name="9a11" id="9a11" class="graf graf--p graf-after--h3">Now for the fun part. Let’s alter the server by setting requestCert and rejectUnauthorized to true in the options and adding a bit to the console.log line.</p><pre name="a890" id="a890" class="graf graf--pre graf-after--p">var fs = require('fs'); <br>var https = require('https'); </pre><pre name="1537" id="1537" class="graf graf--pre graf-after--pre">var options = { <br>    key: fs.readFileSync('server-key.pem'), <br>    cert: fs.readFileSync('server-crt.pem'), <br>    ca: fs.readFileSync('ca-crt.pem'), <br>    requestCert: true, <br>    rejectUnauthorized: true<br>}; </pre><pre name="cfe6" id="cfe6" class="graf graf--pre graf-after--pre">https.createServer(options, function (req, res) { <br>    console.log(new Date()+' '+ <br>        req.connection.remoteAddress+' '+ <br>        req.socket.getPeerCertificate().subject.CN+' '+ <br>        req.method+' '+req.url); <br>    res.writeHead(200); <br>    res.end("hello world\n"); <br>}).listen(4433);</pre><p name="b740" id="b740" class="graf graf--p graf-after--pre">Now if you try to access your HTTPS server, you will probably be rejected because you aren’t presenting a valid client certificate. (in Node.js, you will get a socket hangup error because TLS won’t complete) Let’s add that to the client we were using by adding a key and cert to the options.</p><pre name="d4e0" id="d4e0" class="graf graf--pre graf-after--p">var fs = require('fs'); <br>var https = require('https'); </pre><pre name="2940" id="2940" class="graf graf--pre graf-after--pre">var options = { <br>    hostname: 'localhost', <br>    port: 4433, <br>    path: '/', <br>    method: 'GET', <br>    key: fs.readFileSync('client1-key.pem'), <br>    cert: fs.readFileSync('client1-crt.pem'), <br>    ca: fs.readFileSync('ca-crt.pem') }; </pre><pre name="6b06" id="6b06" class="graf graf--pre graf-after--pre">var req = https.request(options, function(res) { <br>    res.on('data', function(data) { <br>        process.stdout.write(data); <br>    }); <br>}); </pre><pre name="8e36" id="8e36" class="graf graf--pre graf-after--pre">req.end(); </pre><pre name="707a" id="707a" class="graf graf--pre graf-after--pre">req.on('error', function(e) { <br>    console.error(e); <br>});</pre><p name="9769" id="9769" class="graf graf--p graf-after--pre">Now for the moment of truth. Run the above against your server and you should see ‘hello world’ echo back. Look at the log the server produced and you should see ‘client1’. The server has recognized the client and printed it’s “Common Name”!</p><p name="8cfb" id="8cfb" class="graf graf--p graf-after--p">Try changing the client to use the client2 certificate and you should see ‘client2’ in the server’s logging. Cool, eh?</p><h3 name="8acf" id="8acf" class="graf graf--h3 graf-after--p">Certificate Revocation</h3><p name="11f7" id="11f7" class="graf graf--p graf-after--h3">There is one more thing to do here. Let’s add the ability to revoke a client certificate without invalidating everything. To do this, we will create a Certificate Revocation List (CRL) and revoke the client2 certificate. The first time we’ll do this, we need to create an empty database:</p><pre name="d835" id="d835" class="graf graf--pre graf-after--p">touch ca-database.txt</pre><p name="933b" id="933b" class="graf graf--p graf-after--pre">Now let’s revoke client2’s certificate.</p><pre name="c817" id="c817" class="graf graf--pre graf-after--p">openssl ca -revoke client2-crt.pem -keyfile ca-key.pem -config ca.cnf -cert ca-crt.pem -passin 'pass:password'</pre><p name="fef3" id="fef3" class="graf graf--p graf-after--pre">And we’ll update the CRL.</p><pre name="8a8b" id="8a8b" class="graf graf--pre graf-after--p">openssl ca -keyfile ca-key.pem -cert ca-crt.pem -config ca.cnf -gencrl -out ca-crl.pem -passin 'pass:password'</pre><p name="87c5" id="87c5" class="graf graf--p graf-after--pre">Lastly, we’ll have to define <strong class="markup--strong markup--p-strong">crl</strong> in the options. Our new server will look like this.</p><pre name="6f2c" id="6f2c" class="graf graf--pre graf-after--p">var fs = require('fs'); <br>var https = require('https'); </pre><pre name="1ff4" id="1ff4" class="graf graf--pre graf-after--pre">var options = { <br>    key: fs.readFileSync('server-key.pem'), <br>    cert: fs.readFileSync('server-crt.pem'), <br>    ca: fs.readFileSync('ca-crt.pem'), <br>    crl: fs.readFileSync('ca-crl.pem'), <br>    requestCert: true, <br>    rejectUnauthorized: true <br>}; </pre><pre name="40f6" id="40f6" class="graf graf--pre graf-after--pre">https.createServer(options, function (req, res) { <br>    console.log(new Date()+' '+ <br>        req.connection.remoteAddress+' '+ <br>        req.socket.getPeerCertificate().subject.CN+' '+ <br>        req.method+' '+req.url); <br>    res.writeHead(200); <br>    res.end("hello world\n"); <br>}).listen(4433);</pre><p name="37a1" id="37a1" class="graf graf--p graf-after--pre">Now our server will respect the certificate revocation list so we should now see client2 rejected while client1 is still accepted!</p><p name="e692" id="e692" class="graf graf--p graf-after--p">How’s that for some new stealth ninja Node.js skills for ya?</p><p name="808b" id="808b" class="graf graf--p graf-after--p graf--trailing">We have seen how we can create self signed client (and server) certificates and ensure that clients interacting with our server only use valid certificates signed by us. Additionally, we can revoke any of the client certificates without having to revoke everything and rebuild from scratch. Because we can see the Common Name of the client certificates being presented and we know that they must be valid in order for us to see them, we can use this as a strategy to identify clients using our server.</p></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link" href="https://engineering.circle.com/tagged/nodejs?source=post" data-action-source="post" data-collection-slug="circle-engineering">Nodejs</a></li><li><a class="link u-baseColor--link" href="https://engineering.circle.com/tagged/javascript?source=post" data-action-source="post" data-collection-slug="circle-engineering">JavaScript</a></li></ul></div></div></div><div class="row js-postActionsFooter"><div class="postActions col u-size12of12"><div class="u-floatLeft buttonSet buttonSet--withLabels"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="315e548354a2" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_actions_footer"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton" title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/315e548354a2" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal" data-action="show-recommends" data-action-value="315e548354a2">30</button></div></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" data-action="scroll-to-responses" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal" data-action="scroll-to-responses">6</button></div></div><div class="u-floatRight buttonSet buttonSet--narrow"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path></svg></span></button></div></div></div></div><div class="js-postPromotionWrapper postPromotionWrapper" data-location-id="footer_above_post_attribution"></div><div class="container u-maxWidth740 js-postAttributionFooterContainer u-paddingTop20 u-paddingBottom20 u-marginTop10 u-borderTopLightest u-xs-paddingTop10 u-xs-paddingBottom10"><div class="row js-postFooterInfo"><div class="col u-size6of12 u-xs-size12of12"><li class="u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="8f1080f36160"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton" data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton" data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/8f1080f36160" data-action-source="footer_card_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell "><a class="link avatar u-baseColor--link" href="https://engineering.circle.com/@anders94?source=footer_card" title="Go to the profile of Anders Brownworth" aria-label="Go to the profile of Anders Brownworth" data-action-source="footer_card" data-user-id="8f1080f36160" data-collection-slug="circle-engineering" dir="auto"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-s2mHdFZ_LvU4XAwq8GckGQ.jpeg" class="avatar-image avatar-image--small" alt="Go to the profile of Anders Brownworth"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://engineering.circle.com/@anders94" property="cc:attributionName" title="Go to the profile of Anders Brownworth" aria-label="Go to the profile of Anders Brownworth" rel="author cc:attributionUrl" data-user-id="8f1080f36160" data-collection-slug="circle-engineering" dir="auto">Anders Brownworth</a></h3><p class="u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Rethinking money <a href="http://twitter.com/CirclePay" target="_blank" title="Twitter profile for @CirclePay">@CirclePay</a> | Co-taught the Blockchain class at MIT | Podcaster | Runner | Helicopter Pilot</p></div></li></div><div class="col u-size6of12 u-xs-size12of12 u-xs-marginTop30"><li class="u-block u-paddingBottom18 js-cardCollection"><div class="u-marginLeft20 u-floatRight"><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton" data-action="sign-in-prompt" data-sign-in-action="toggle-follow-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/circle-engineering" data-collection-id="d28865909d24"><span class="button-label  js-buttonLabel">Follow</span></button></div><div class="u-tableCell "><a class="link avatar avatar--roundedRectangle u-baseColor--link" href="https://engineering.circle.com/?source=footer_card" title="Go to Circle Engineering" aria-label="Go to Circle Engineering" data-action-source="footer_card" data-collection-slug="circle-engineering"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-Sohlrcl_aYcw8jQ3-KLEKw.png" class="avatar-image u-size60x60" alt="Circle Engineering"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://engineering.circle.com/?source=footer_card" rel="collection" data-action-source="footer_card" data-collection-slug="circle-engineering">Circle Engineering</a></h3><p class="u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Thoughts, tips, and learnings from the Circle engineering team</p><div class="buttonSet"></div></div></li></div></div></div><div class="js-postFooterPlacements" data-action-scope="_actionscope_9"><div class="streamItem streamItem--placementCardGrid js-streamItem"><div class="u-clearfix u-backgroundGrayLightest"><div class="row u-marginAuto u-maxWidth1000 u-paddingTop30 u-paddingBottom40"><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="u-height280 u-sizeFullWidth u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackedPost" data-post-id="f07b5f62a85b" data-source="placement_card_footer_grid---------0-41" data-tracking-context="placement" data-scroll="native"><div class="u-padding15 u-borderBox u-flexColumn u-sizeFull"><a class="link link--noUnderline u-flex1 u-flexColumn u-baseColor--link" href="https://engineering.circle.com/instrumentation-testing-with-dagger-mockito-and-espresso-f07b5f62a85b?source=placement_card_footer_grid---------0-41" data-action-source="placement_card_footer_grid---------0-41"><div class="postMetaInline u-marginBottom7">More from Circle Engineering</div><div class="u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Instrumentation Testing with Dagger, Mockito, and Espresso</div><div class="u-textColorNormal u-fontSize22 u-contentSansThin u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-marginTop7 u-paddingBottom2">Historically, testing on Android has not been easy, but many awesome projects have emerged which, in combination, have made testing much…</div></a><div class="u-paddingTop10 u-flex0 u-flexCenter"><div class="u-flex1"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link avatar u-baseColor--link" href="https://engineering.circle.com/@bryanstern" data-action="show-user-card" data-action-value="be5abd386c0a" data-action-type="hover" data-user-id="be5abd386c0a" data-collection-slug="circle-engineering" dir="auto"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/0-InajuzmdLujNDW22.jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Bryan Stern"></a></div><div class="postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis"><a class="link link link--darken link--darker u-baseColor--link" href="https://engineering.circle.com/@bryanstern?source=placement_card_footer_grid---------0-41" data-action="show-user-card" data-action-source="placement_card_footer_grid---------0-41" data-action-value="be5abd386c0a" data-action-type="hover" data-user-id="be5abd386c0a" data-collection-slug="circle-engineering" dir="auto">Bryan Stern</a><div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><span class="readingTime u-textColorNormal" title="7 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="js-actionRecommend" data-post-id="f07b5f62a85b" data-is-label-padded="true" data-source="placement_card_footer_grid---------0-41"><button class="button button--primary button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton" title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/f07b5f62a85b" data-action-source="placement_card_footer_grid---------0-41"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12zM8.428 4.866c-2.414 0-4.378 2.05-4.378 4.568 0 3.475 5.057 7.704 7.774 9.975.243.2.47.39.676.56.245-.21.52-.43.813-.68 2.856-2.36 7.637-6.31 7.637-9.87 0-2.52-1.964-4.57-4.377-4.57-1.466 0-2.828.76-3.644 2.04-.1.14-.26.23-.43.23-.18 0-.34-.09-.43-.24-.82-1.27-2.18-2.03-3.65-2.03z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="f07b5f62a85b">22</button></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/f07b5f62a85b"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="26" viewBox="0 0 25 26"><path d="M19 7c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 17.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V7z" fill-rule="evenodd"></path></svg></span></span></button></div></div></div></div></div></div><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="u-height280 u-sizeFullWidth u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackedPost" data-post-id="463521c4c55c" data-source="placement_card_footer_grid---------1-40" data-tracking-context="placement" data-scroll="native"><a class="link link--noUnderline u-baseColor--link" href="https://medium.com/front-end-hacking/reliable-continuous-integration-in-javascript-463521c4c55c?source=placement_card_footer_grid---------1-40" data-action-source="placement_card_footer_grid---------1-40"><div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-sizeFullWidth u-borderBottomLight u-borderRadiusTop4" style="background-image: url(&quot;https://cdn-images-1.medium.com/fit/c/800/240/0*n3-8-RJi9xMHVU2r.png&quot;); background-position: 50% 50% !important;"></div></a><div class="u-padding15 u-borderBox u-flexColumn u-height180"><a class="link link--noUnderline u-flex1 u-baseColor--link" href="https://medium.com/front-end-hacking/reliable-continuous-integration-in-javascript-463521c4c55c?source=placement_card_footer_grid---------1-40" data-action-source="placement_card_footer_grid---------1-40"><div class="postMetaInline u-marginBottom7">Related reads</div><div class="u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Reliable Continuous Integration in JavaScript</div></a><div class="u-paddingTop10 u-flex0 u-flexCenter"><div class="u-flex1"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link avatar u-baseColor--link" href="https://medium.com/@charpeni" data-action="show-user-card" data-action-value="932a4e7a9846" data-action-type="hover" data-user-id="932a4e7a9846" dir="auto"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-6zGkvQnBLwJvKjTYjGbezQ.jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Nicolas Charpentier"></a></div><div class="postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis"><a class="link link link--darken link--darker u-baseColor--link" href="https://medium.com/@charpeni?source=placement_card_footer_grid---------1-40" data-action="show-user-card" data-action-source="placement_card_footer_grid---------1-40" data-action-value="932a4e7a9846" data-action-type="hover" data-user-id="932a4e7a9846" dir="auto">Nicolas Charpentier</a><div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><span class="readingTime u-textColorNormal" title="4 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="js-actionRecommend" data-post-id="463521c4c55c" data-is-label-padded="true" data-source="placement_card_footer_grid---------1-40"><button class="button button--primary button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton" title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/463521c4c55c" data-action-source="placement_card_footer_grid---------1-40"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12zM8.428 4.866c-2.414 0-4.378 2.05-4.378 4.568 0 3.475 5.057 7.704 7.774 9.975.243.2.47.39.676.56.245-.21.52-.43.813-.68 2.856-2.36 7.637-6.31 7.637-9.87 0-2.52-1.964-4.57-4.377-4.57-1.466 0-2.828.76-3.644 2.04-.1.14-.26.23-.43.23-.18 0-.34-.09-.43-.24-.82-1.27-2.18-2.03-3.65-2.03z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="463521c4c55c">18</button></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/463521c4c55c"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="26" viewBox="0 0 25 26"><path d="M19 7c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 17.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V7z" fill-rule="evenodd"></path></svg></span></span></button></div></div></div></div></div></div><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="u-height280 u-sizeFullWidth u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackedPost" data-post-id="bd85f05685b" data-source="placement_card_footer_grid---------2-40" data-tracking-context="placement" data-scroll="native"><a class="link link--noUnderline u-baseColor--link" href="https://medium.com/kevin-salters-blog/writing-epic-unit-tests-bd85f05685b?source=placement_card_footer_grid---------2-40" data-action-source="placement_card_footer_grid---------2-40"><div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-sizeFullWidth u-borderBottomLight u-borderRadiusTop4" style="background-image: url(&quot;https://cdn-images-1.medium.com/fit/c/800/240/1*VrxxxrRV3lq3k2A_-QZ2Yg.png&quot;); background-position: 50% 50% !important;"></div></a><div class="u-padding15 u-borderBox u-flexColumn u-height180"><a class="link link--noUnderline u-flex1 u-baseColor--link" href="https://medium.com/kevin-salters-blog/writing-epic-unit-tests-bd85f05685b?source=placement_card_footer_grid---------2-40" data-action-source="placement_card_footer_grid---------2-40"><div class="postMetaInline u-marginBottom7">Related reads</div><div class="u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Writing Epic Unit Tests</div></a><div class="u-paddingTop10 u-flex0 u-flexCenter"><div class="u-flex1"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link avatar u-baseColor--link" href="https://medium.com/@kevinsalter" data-action="show-user-card" data-action-value="30224ee77189" data-action-type="hover" data-user-id="30224ee77189" dir="auto"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-3M7m0VG_KithhPo4TQK85A.jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Kevin Salter"></a></div><div class="postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis"><a class="link link link--darken link--darker u-baseColor--link" href="https://medium.com/@kevinsalter?source=placement_card_footer_grid---------2-40" data-action="show-user-card" data-action-source="placement_card_footer_grid---------2-40" data-action-value="30224ee77189" data-action-type="hover" data-user-id="30224ee77189" dir="auto">Kevin Salter</a><div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><span class="readingTime u-textColorNormal" title="3 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="js-actionRecommend" data-post-id="bd85f05685b" data-is-label-padded="true" data-source="placement_card_footer_grid---------2-40"><button class="button button--primary button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton" title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/bd85f05685b" data-action-source="placement_card_footer_grid---------2-40"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12zM8.428 4.866c-2.414 0-4.378 2.05-4.378 4.568 0 3.475 5.057 7.704 7.774 9.975.243.2.47.39.676.56.245-.21.52-.43.813-.68 2.856-2.36 7.637-6.31 7.637-9.87 0-2.52-1.964-4.57-4.377-4.57-1.466 0-2.828.76-3.644 2.04-.1.14-.26.23-.43.23-.18 0-.34-.09-.43-.24-.82-1.27-2.18-2.03-3.65-2.03z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="bd85f05685b">19</button></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/bd85f05685b"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="26" viewBox="0 0 25 26"><path d="M19 7c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 17.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V7z" fill-rule="evenodd"></path></svg></span></span></button></div></div></div></div></div></div></div></div></div></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper" data-action-scope="_actionscope_5"><div class="container u-maxWidth740"><div class="responsesStreamWrapper u-maxWidth640 js-responsesStreamWrapper"><div class="container u-maxWidth640 responsesStream-title u-paddingTop15"><div class="row"><header class="heading u-clearfix"><div class="u-clearfix"><div class="heading-content u-floatLeft"><span class="heading-title heading-title--semibold">Responses</span></div></div></header></div></div><div class="container u-maxWidth640 u-marginBottom30 responsesStream-editor cardChromeless js-responsesStreamEditor"><div class="row"><div class="col u-size12of12"><div class="u-paddingTop30 u-paddingBottom30 u-paddingLeft0 u-paddingRight0 u-borderBottomLightest js-responsesLoggedOutPrompt"><button class="button button--chromeless is-touchIconBlackPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--withIconAndLabel button--loggedOutPrompt" data-action="sign-in-prompt" data-redirect="https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2#--respond" data-action-source="logged_out_response_prompt"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"></path></svg></span><span class="button-label  js-buttonLabel">Write a response…</span></button></div></div></div></div><div class="container u-maxWidth640 u-marginBottom30 u-borderTopLighter u-hide js-noOtherResponses"><div class="row"><div class="col u-size12of12"><div class="u-paddingTop20 u-paddingBottom25"><div class="u-inlineBlock u-verticalAlignTop u-paddingRight10"><div class="avatar u-inline"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-dmbNkD5D-u45r44go_cf0g.png" class="avatar-image u-size36x36 u-xs-size32x32" alt="Unknown user"></div></div><div class="u-inlineBlock"><div class="u-lineHeight36 u-textColorNormal u-contentSerifRegular">No responses yet</div></div></div></div></div></div><div class="responsesStream js-responsesStream"><div class="streamItem streamItem--conversation js-streamItem" data-action-scope="_actionscope_6"><div class="streamItemConversation container u-maxWidth660"><div class="streamItemConversation-divider"></div><header class="heading u-clearfix heading--light heading--simple"><div class="u-clearfix"><div class="heading-content u-floatLeft"><span class="heading-title">Conversation with <a class="link link--accent u-accentColor--textNormal u-baseColor--link" href="https://medium.com/@anders94" data-action="show-user-card" data-action-value="8f1080f36160" data-action-type="hover" data-user-id="8f1080f36160" dir="auto">Anders Brownworth</a>.</span></div></div></header><div class="row streamItemConversation-inner cardChromeless"><div class="streamItemConversationItem streamItemConversationItem--preview"><div class="postArticle js-postArticle js-trackedPost postArticle--short" data-post-id="e60cc3ab40bb" data-source="responses---------0-----------" data-action-scope="_actionscope_7" data-scroll="native"><div class="u-clearfix u-marginBottom10"><div class="postMetaInline u-floatLeft"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link avatar u-baseColor--link" href="https://medium.com/@icewaterfish" data-action="show-user-card" data-action-value="7f955cb2fb7a" data-action-type="hover" data-user-id="7f955cb2fb7a" dir="auto"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/0-EhzW8aywsO-9BE3q.png" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Helder Carvalho"></a></div><div class="postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis"><a class="link link link--darken link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link" href="https://medium.com/@icewaterfish?source=responses---------0-----------" data-action="show-user-card" data-action-source="responses---------0-----------" data-action-value="7f955cb2fb7a" data-action-type="hover" data-user-id="7f955cb2fb7a" dir="auto">Helder Carvalho</a><div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/@icewaterfish/hi-anders-have-you-thought-on-how-would-you-proceed-if-you-wanted-to-use-a-trusted-third-party-e60cc3ab40bb?source=responses---------0-----------" data-action="open-post" data-action-value="https://medium.com/@icewaterfish/hi-anders-have-you-thought-on-how-would-you-proceed-if-you-wanted-to-use-a-trusted-third-party-e60cc3ab40bb?source=responses---------0-----------" data-action-source="preview-listing"><time datetime="2016-11-30T11:38:43.265Z">Nov 30, 2016</time></a></div></div></div></div></div><div><a class="" href="https://medium.com/@icewaterfish/hi-anders-have-you-thought-on-how-would-you-proceed-if-you-wanted-to-use-a-trusted-third-party-e60cc3ab40bb?source=responses---------0-----------"><div class="postArticle-content js-postField"><section class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="d166" id="d166" class="graf graf--p graf--leading graf--trailing">Hi Anders, have you thought on how would you proceed if you wanted to use a trusted third party certificate for the connection and retain the certificate request. You loose the ability to sign the clients CSR if you are not the CA, right?</p></div></div></section></div></a></div><div class="u-clearfix u-paddingTop10"><div class="buttonSet buttonSet--withLabels u-floatLeft"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="e60cc3ab40bb" data-is-flush-left="true" data-source="listing"><button class="button button--primary button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton" title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/e60cc3ab40bb" data-action-source="listing"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12zM8.428 4.866c-2.414 0-4.378 2.05-4.378 4.568 0 3.475 5.057 7.704 7.774 9.975.243.2.47.39.676.56.245-.21.52-.43.813-.68 2.856-2.36 7.637-6.31 7.637-9.87 0-2.52-1.964-4.57-4.377-4.57-1.466 0-2.828.76-3.644 2.04-.1.14-.26.23-.43.23-.18 0-.34-.09-.43-.24-.82-1.27-2.18-2.03-3.65-2.03z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12z" fill-rule="evenodd"></path></svg></span></span></button></div></div></div><div class="buttonSet u-floatRight"><div class="buttonSet-inner"><a class="button button--chromeless u-baseColor--buttonNormal" href="https://medium.com/@icewaterfish/hi-anders-have-you-thought-on-how-would-you-proceed-if-you-wanted-to-use-a-trusted-third-party-e60cc3ab40bb?source=responses---------0-----------#--responses" data-action-source="responses---------0-----------">1 response</a><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/e60cc3ab40bb"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px is-flushRight"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px is-flushRight"><svg class="svgIcon-use" width="25" height="26" viewBox="0 0 25 26"><path d="M19 7c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 17.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V7z" fill-rule="evenodd"></path></svg></span></span></button></div></div></div></div></div><div class="streamItemConversationItem streamItemConversationItem--preview"><div class="postArticle js-postArticle js-trackedPost postArticle--short" data-post-id="36fd7d43ff11" data-source="responses---------0-----------" data-action-scope="_actionscope_8" data-scroll="native"><div class="u-clearfix u-marginBottom10"><div class="postMetaInline u-floatLeft"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link avatar u-baseColor--link" href="https://medium.com/@anders94" data-action="show-user-card" data-action-value="8f1080f36160" data-action-type="hover" data-user-id="8f1080f36160" dir="auto"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-s2mHdFZ_LvU4XAwq8GckGQ(1).jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Anders Brownworth"></a></div><div class="postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis"><a class="link link link--darken link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link" href="https://medium.com/@anders94?source=responses---------0-----------" data-action="show-user-card" data-action-source="responses---------0-----------" data-action-value="8f1080f36160" data-action-type="hover" data-user-id="8f1080f36160" dir="auto">Anders Brownworth</a><div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/@anders94/that-is-certainly-supported-but-you-are-right-revocation-of-certificates-would-have-to-involve-36fd7d43ff11?source=responses---------0-----------" data-action="open-post" data-action-value="https://medium.com/@anders94/that-is-certainly-supported-but-you-are-right-revocation-of-certificates-would-have-to-involve-36fd7d43ff11?source=responses---------0-----------" data-action-source="preview-listing"><time datetime="2016-11-30T13:14:05.265Z">Nov 30, 2016</time></a><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="1 min read"></span></div></div></div></div></div><div class="js-inlineExpandBody"><a class="" href="https://medium.com/@anders94/that-is-certainly-supported-but-you-are-right-revocation-of-certificates-would-have-to-involve-36fd7d43ff11?source=responses---------0-----------" data-action="expand-inline"><div class="postArticle-content js-postField"><section class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="a6d4" id="a6d4" class="graf graf--p graf--leading graf--trailing">That is certainly supported but you are right — revocation of certificates would have to involve the third party certificate authority if you chose not to self sign. I think use of a third party is only interesting in this scenario when it is valuable for the two parties to have some external verification of who each other is, such as Verisign…</p></div></div></section></div></a></div><div class="postArticle-readMore"><button class="button button--smaller button--link u-baseColor--buttonNormal" data-action="expand-inline">Read more…</button></div><div class="u-clearfix u-paddingTop10"><div class="buttonSet buttonSet--withLabels u-floatLeft"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="36fd7d43ff11" data-is-flush-left="true" data-source="listing"><button class="button button--primary button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton" title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/36fd7d43ff11" data-action-source="listing"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12zM8.428 4.866c-2.414 0-4.378 2.05-4.378 4.568 0 3.475 5.057 7.704 7.774 9.975.243.2.47.39.676.56.245-.21.52-.43.813-.68 2.856-2.36 7.637-6.31 7.637-9.87 0-2.52-1.964-4.57-4.377-4.57-1.466 0-2.828.76-3.644 2.04-.1.14-.26.23-.43.23-.18 0-.34-.09-.43-.24-.82-1.27-2.18-2.03-3.65-2.03z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M12.5 21a.492.492 0 0 1-.327-.122c-.278-.24-.61-.517-.978-.826-2.99-2.5-7.995-6.684-7.995-10.565C3.2 6.462 5.578 4 8.5 4c1.55 0 3 .695 4 1.89a5.21 5.21 0 0 1 4-1.89c2.923 0 5.3 2.462 5.3 5.487 0 3.97-4.923 8.035-7.865 10.464-.42.35-.798.66-1.108.93a.503.503 0 0 1-.327.12z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal u-disablePointerEvents" data-action="show-recommends" data-action-value="36fd7d43ff11">1</button></div></div></div><div class="buttonSet u-floatRight"><div class="buttonSet-inner"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/36fd7d43ff11"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px is-flushRight"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px is-flushRight"><svg class="svgIcon-use" width="25" height="26" viewBox="0 0 25 26"><path d="M19 7c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 17.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V7z" fill-rule="evenodd"></path></svg></span></span></button></div></div></div></div></div></div></div></div></div><div class="container u-maxWidth640 js-showOtherResponses"><div class="row"><button class="button button--primary button--withChrome u-accentColor--buttonNormal responsesStream-showOtherResponses cardChromeless u-sizeFullWidth" data-action="show-other-responses">Show all responses</button></div></div><div class="responsesStream js-responsesStreamOther"></div></div></div></div><div class="supplementalPostContent js-readNext"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><div class="u-marginAuto u-maxWidth1000"><div class="js-postShareWidget u-foreground u-sm-hide u-fixed u-transition--fadeOut300" data-scroll="fixed" style="top: 150px;"><ul><li class="u-uiTextSemibold u-textAlignCenter u-textColorNormal u-fontSize12 u-textUppercase">Share</li><li class="u-textAlignCenter"><div class="js-actionRecommend" data-post-id="315e548354a2" data-is-icon-29px="true" data-is-vertical="true" data-has-recommend-list="true" data-source="post_share_widget"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton" title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/315e548354a2" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal  u-block u-marginAuto u-marginTopNegative5" data-action="show-recommends" data-action-value="315e548354a2">30</button></div></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/315e548354a2"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"></path></svg></span></span></button></li></ul></div></div><div class="u-fixed u-bottom0 u-sizeFullWidth u-backgroundWhite u-boxShadowTop u-borderBox u-paddingTop10 u-paddingBottom10 u-zIndexMetabar u-xs-paddingLeft10 u-xs-paddingRight10 js-stickyFooter"><div class="u-maxWidth700 u-marginAuto u-flexCenter"><div class="u-fontSize16 u-flex1 u-flexCenter"><div class="u-flex0 u-inlineBlock u-paddingRight20 u-xs-paddingRight10"><a class="link avatar avatar--roundedRectangle u-baseColor--link" href="https://engineering.circle.com/" title="Go to Circle Engineering" aria-label="Go to Circle Engineering" data-collection-slug="circle-engineering"><img src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/1-Sohlrcl_aYcw8jQ3-KLEKw(1).png" class="avatar-image avatar-image--smaller" alt="Circle Engineering"></a></div><div class="u-flex1 u-inlineBlock"><div class="u-xs-hide">Never miss a story from<strong> Circle Engineering</strong>, when you sign up for Medium. <a class="link link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link" href="https://medium.com/@Medium/personalize-your-medium-experience-with-users-publications-tags-26a41ab1ee0c#.hx4zuv3mg" data-action-source="sticky_footer">Learn more</a></div><div class="u-xs-show">Never miss a story from<strong> Circle Engineering</strong></div></div></div><div class="u-marginLeft50 u-xs-marginAuto"><button class="button button--primary button--dark is-active u-noUserSelect button--withChrome u-accentColor--buttonDark u-uiTextSemibold u-textUppercase u-fontSize12 button--followCollection js-followCollectionButton" data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/circle-engineering" data-action-source="sticky_footer_collection_follow"><span class="button-label  button-defaultState js-buttonLabel">Get updates</span><span class="button-label button-activeState">Get updates</span></button></div></div></div><style class="js-collectionStyle">
.u-accentColor--borderLight {border-color: #0C9B72 !important;}
.u-accentColor--borderNormal {border-color: #0C9B72 !important;}
.u-accentColor--borderDark {border-color: #228463 !important;}
.u-accentColor--iconLight .svgIcon,.u-accentColor--iconLight.svgIcon {fill: #0C9B72 !important;}
.u-accentColor--iconNormal .svgIcon,.u-accentColor--iconNormal.svgIcon {fill: #0C9B72 !important;}
.u-accentColor--iconDark .svgIcon,.u-accentColor--iconDark.svgIcon {fill: #228463 !important;}
.u-accentColor--textNormal {color: #228463 !important;}
.u-accentColor--hoverTextNormal:hover {color: #228463 !important;}
.u-accentColor--textNormal.u-accentColor--textDarken:hover {color: #25795B !important;}
.u-accentColor--textDark {color: #25795B !important;}
.u-accentColor--backgroundLight {background-color: #0C9B72 !important;}
.u-accentColor--backgroundNormal {background-color: #0C9B72 !important;}
.u-accentColor--backgroundDark {background-color: #228463 !important;}
.u-accentColor--buttonDark {border-color: #228463 !important; color: #25795B !important;}
.u-accentColor--buttonDark:hover {border-color: #25795B !important;}
.u-accentColor--buttonDark .icon:before,.u-accentColor--buttonDark .svgIcon{color: #228463 !important; fill: #228463 !important;}
.u-accentColor--buttonNormal {border-color: #0C9B72 !important; color: #228463 !important;}
.u-accentColor--buttonNormal:hover {border-color: #228463 !important;}
.u-accentColor--buttonNormal .icon:before,.u-accentColor--buttonNormal .svgIcon{color: #0C9B72 !important; fill: #0C9B72 !important;}
.u-accentColor--buttonNormal.button--filled .icon:before,.u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-accentColor--buttonDark.button--filled,.u-accentColor--buttonDark.button--withChrome.is-active,.u-accentColor--fillWhenActive.is-active {background-color: #228463 !important; border-color: #228463 !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-accentColor--buttonNormal.button--filled,.u-accentColor--buttonNormal.button--withChrome.is-active {background-color: #0C9B72 !important; border-color: #0C9B72 !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.postArticle.is-withAccentColors .markup--user,.postArticle.is-withAccentColors .markup--query {color: #228463 !important;}.u-tintBgColor {background-color: rgba(0, 152, 111, 1) !important;}.u-tintBgColor .u-fadeLeft:before {background-image: linear-gradient(to right, rgba(0, 152, 111, 1) 0%, rgba(0, 152, 111, 0) 100%) !important;}.u-tintBgColor .u-fadeRight:after {background-image: linear-gradient(to right, rgba(0, 152, 111, 0) 0%, rgba(0, 152, 111, 1) 100%) !important;}
.u-tintSpectrum .u-baseColor--borderLight {border-color: #96D2B6 !important;}
.u-tintSpectrum .u-baseColor--borderNormal {border-color: #BCE7D2 !important;}
.u-tintSpectrum .u-baseColor--borderDark {border-color: #E0FBEC !important;}
.u-tintSpectrum .u-baseColor--iconLight .svgIcon,.u-tintSpectrum .u-baseColor--iconLight.svgIcon {fill: #96D2B6 !important;}
.u-tintSpectrum .u-baseColor--iconNormal .svgIcon,.u-tintSpectrum .u-baseColor--iconNormal.svgIcon {fill: #BCE7D2 !important;}
.u-tintSpectrum .u-baseColor--iconDark .svgIcon,.u-tintSpectrum .u-baseColor--iconDark.svgIcon {fill: #E0FBEC !important;}
.u-tintSpectrum .u-baseColor--textNormal {color: #BCE7D2 !important;}
.u-tintSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--textDark {color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--backgroundLight {background-color: #96D2B6 !important;}
.u-tintSpectrum .u-baseColor--backgroundNormal {background-color: #BCE7D2 !important;}
.u-tintSpectrum .u-baseColor--backgroundDark {background-color: #E0FBEC !important;}
.u-tintSpectrum .u-baseColor--buttonLight {border-color: #96D2B6 !important; color: #96D2B6 !important;}
.u-tintSpectrum .u-baseColor--buttonLight:hover {border-color: #96D2B6 !important;}
.u-tintSpectrum .u-baseColor--buttonLight .icon:before,.u-tintSpectrum .u-baseColor--buttonLight .svgIcon {color: #96D2B6 !important; fill: #96D2B6 !important;}
.u-tintSpectrum .u-baseColor--buttonDark {border-color: #E0FBEC !important; color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--buttonDark:hover {border-color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--buttonDark .icon:before,.u-tintSpectrum .u-baseColor--buttonDark .svgIcon {color: #E0FBEC !important; fill: #E0FBEC !important;}
.u-tintSpectrum .u-baseColor--buttonNormal {border-color: #BCE7D2 !important; color: #BCE7D2 !important;}
.u-tintSpectrum .u-baseColor--buttonNormal:hover {border-color: #E0FBEC !important;}
.u-tintSpectrum .u-baseColor--buttonNormal .icon:before,.u-tintSpectrum .u-baseColor--buttonNormal .svgIcon {color: #BCE7D2 !important; fill: #BCE7D2 !important;}
.u-tintSpectrum .u-baseColor--buttonDark.button--filled,.u-tintSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: #E0FBEC !important; border-color: #E0FBEC !important; color: rgba(0, 152, 111, 1) !important; fill: rgba(0, 152, 111, 1) !important;}
.u-tintSpectrum .u-baseColor--buttonNormal.button--filled,.u-tintSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: #BCE7D2 !important; border-color: #BCE7D2 !important; color: rgba(0, 152, 111, 1) !important; fill: rgba(0, 152, 111, 1) !important;}
.u-tintSpectrum .u-baseColor--link {color: #BCE7D2 !important;}
.u-tintSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--link.link--darken:hover,.u-tintSpectrum .u-baseColor--link.link--darken:focus,.u-tintSpectrum .u-baseColor--link.link--darken:active {color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--link.link--dark {color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:active {color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--link.link--darker {color: #F1FFF9 !important;}
.u-tintSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: #96D2B6;}
.u-tintSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: #96D2B6;}
.u-tintSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: #96D2B6;}
.u-tintSpectrum .svgIcon--logoNew path:nth-child(1) {stroke: none !important; fill: #55B18C !important;}
.u-tintSpectrum .svgIcon--logoNew path:nth-child(2) {stroke: none !important; fill: #6CBC9B !important;}
.u-tintSpectrum .svgIcon--logoNew path:nth-child(3) {stroke: none !important; fill: #96D2B6 !important;}
.u-tintSpectrum .svgIcon--logoNew path:nth-child(4) {stroke: none !important; fill: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--borderLight {border-color: #96D2B6 !important;}
.u-tintSpectrum .u-accentColor--borderNormal {border-color: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--borderDark {border-color: #E0FBEC !important;}
.u-tintSpectrum .u-accentColor--iconLight .svgIcon,.u-tintSpectrum .u-accentColor--iconLight.svgIcon {fill: #96D2B6 !important;}
.u-tintSpectrum .u-accentColor--iconNormal .svgIcon,.u-tintSpectrum .u-accentColor--iconNormal.svgIcon {fill: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--iconDark .svgIcon,.u-tintSpectrum .u-accentColor--iconDark.svgIcon {fill: #E0FBEC !important;}
.u-tintSpectrum .u-accentColor--textNormal {color: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--hoverTextNormal:hover {color: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: #F1FFF9 !important;}
.u-tintSpectrum .u-accentColor--textDark {color: #F1FFF9 !important;}
.u-tintSpectrum .u-accentColor--backgroundLight {background-color: #96D2B6 !important;}
.u-tintSpectrum .u-accentColor--backgroundNormal {background-color: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--backgroundDark {background-color: #E0FBEC !important;}
.u-tintSpectrum .u-accentColor--buttonDark {border-color: #E0FBEC !important; color: #F1FFF9 !important;}
.u-tintSpectrum .u-accentColor--buttonDark:hover {border-color: #F1FFF9 !important;}
.u-tintSpectrum .u-accentColor--buttonDark .icon:before,.u-tintSpectrum .u-accentColor--buttonDark .svgIcon{color: #E0FBEC !important; fill: #E0FBEC !important;}
.u-tintSpectrum .u-accentColor--buttonNormal {border-color: #BCE7D2 !important; color: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal:hover {border-color: #E0FBEC !important;}
.u-tintSpectrum .u-accentColor--buttonNormal .icon:before,.u-tintSpectrum .u-accentColor--buttonNormal .svgIcon{color: #BCE7D2 !important; fill: #BCE7D2 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-tintSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(0, 152, 111, 1) !important; fill: rgba(0, 152, 111, 1) !important;}
.u-tintSpectrum .u-accentColor--buttonDark.button--filled,.u-tintSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-tintSpectrum .u-accentColor--fillWhenActive.is-active {background-color: #E0FBEC !important; border-color: #E0FBEC !important; color: rgba(0, 152, 111, 1) !important; fill: rgba(0, 152, 111, 1) !important;}
.u-tintSpectrum .u-accentColor--buttonNormal.button--filled,.u-tintSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active {background-color: #BCE7D2 !important; border-color: #BCE7D2 !important; color: rgba(0, 152, 111, 1) !important; fill: rgba(0, 152, 111, 1) !important;}
.u-tintSpectrum .postArticle.is-withAccentColors .markup--user,.u-tintSpectrum .postArticle.is-withAccentColors .markup--query {color: #BCE7D2 !important;}
.u-accentColor--highlightFaint {background-color: rgba(219, 249, 233, 1) !important;}
.u-accentColor--highlightStrong.is-active .svgIcon {fill: rgba(159, 245, 207, 1) !important;}
.postArticle.is-withAccentColors .markup--quote.is-other {background-color: rgba(219, 249, 233, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-other {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(219, 249, 233, 1), rgba(219, 249, 233, 1));}
.postArticle.is-withAccentColors .markup--quote.is-me {background-color: rgba(188, 247, 219, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-me {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(188, 247, 219, 1), rgba(188, 247, 219, 1));}
.postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: rgba(159, 245, 207, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(159, 245, 207, 1), rgba(159, 245, 207, 1));}
.postArticle.is-withAccentColors .markup--quote.is-selected {background-color: rgba(159, 245, 207, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-selected {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(159, 245, 207, 1), rgba(159, 245, 207, 1));}
.postArticle.is-withAccentColors .markup--highlight {background-color: rgba(159, 245, 207, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--highlight {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(159, 245, 207, 1), rgba(159, 245, 207, 1));}</style><style class="js-collectionStyleConstant">.u-imageBgColor {background-color: rgba(0, 0, 0, 0.24705882352941178);}
.u-imageSpectrum .u-baseColor--borderLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-baseColor--borderNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-baseColor--borderDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--iconLight .svgIcon,.u-imageSpectrum .u-baseColor--iconLight.svgIcon {fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--iconNormal .svgIcon,.u-imageSpectrum .u-baseColor--iconNormal.svgIcon {fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--iconDark .svgIcon,.u-imageSpectrum .u-baseColor--iconDark.svgIcon {fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textNormal {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textDark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--backgroundLight {background-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-baseColor--backgroundNormal {background-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--backgroundDark {background-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important; color: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--buttonLight:hover {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-baseColor--buttonLight .icon:before,.u-imageSpectrum .u-baseColor--buttonLight .svgIcon {color: rgba(255, 255, 255, 0.8) !important; fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--buttonDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonDark:hover {border-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonDark .icon:before,.u-imageSpectrum .u-baseColor--buttonDark .svgIcon {color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important; color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal:hover {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal .icon:before,.u-imageSpectrum .u-baseColor--buttonNormal .svgIcon {color: rgba(255, 255, 255, 0.9490196078431372) !important; fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonDark.button--filled,.u-imageSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: rgba(255, 255, 255, 1) !important; border-color: rgba(255, 255, 255, 1) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal.button--filled,.u-imageSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: rgba(255, 255, 255, 0.9490196078431372) !important; border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-baseColor--link {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--darken:hover,.u-imageSpectrum .u-baseColor--link.link--darken:focus,.u-imageSpectrum .u-baseColor--link.link--darken:active {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--dark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:active {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--darker {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .svgIcon--logoNew path:nth-child(1) {stroke: none !important; fill: rgba(255, 255, 255, 0.4) !important;}
.u-imageSpectrum .svgIcon--logoNew path:nth-child(2) {stroke: none !important; fill: rgba(255, 255, 255, 0.4980392156862745) !important;}
.u-imageSpectrum .svgIcon--logoNew path:nth-child(3) {stroke: none !important; fill: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .svgIcon--logoNew path:nth-child(4) {stroke: none !important; fill: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-accentColor--borderLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-accentColor--borderNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-accentColor--borderDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--iconLight .svgIcon,.u-imageSpectrum .u-accentColor--iconLight.svgIcon {fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-accentColor--iconNormal .svgIcon,.u-imageSpectrum .u-accentColor--iconNormal.svgIcon {fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--iconDark .svgIcon,.u-imageSpectrum .u-accentColor--iconDark.svgIcon {fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--textNormal {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--hoverTextNormal:hover {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--textDark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--backgroundLight {background-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-accentColor--backgroundNormal {background-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--backgroundDark {background-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark:hover {border-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark .icon:before,.u-imageSpectrum .u-accentColor--buttonDark .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important; color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal:hover {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal .icon:before,.u-imageSpectrum .u-accentColor--buttonNormal .svgIcon{color: rgba(255, 255, 255, 0.9490196078431372) !important; fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-imageSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-accentColor--buttonDark.button--filled,.u-imageSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-imageSpectrum .u-accentColor--fillWhenActive.is-active {background-color: rgba(255, 255, 255, 1) !important; border-color: rgba(255, 255, 255, 1) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal.button--filled,.u-imageSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active {background-color: rgba(255, 255, 255, 0.9490196078431372) !important; border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .postArticle.is-withAccentColors .markup--user,.u-imageSpectrum .postArticle.is-withAccentColors .markup--query {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--highlightFaint {background-color: rgba(255, 255, 255, 0.2) !important;}
.u-imageSpectrum .u-accentColor--highlightStrong.is-active .svgIcon {fill: rgba(255, 255, 255, 0.6) !important;}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-other {background-color: rgba(255, 255, 255, 0.2) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-other {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-me {background-color: rgba(255, 255, 255, 0.4) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-me {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.4));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-targeted {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-targeted {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-selected {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-selected {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--highlight {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--highlight {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}.u-resetSpectrum .u-tintBgColor {background-color: rgba(255, 255, 255, 1) !important;}.u-resetSpectrum .u-tintBgColor .u-fadeLeft:before {background-image: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%) !important;}.u-resetSpectrum .u-tintBgColor .u-fadeRight:after {background-image: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%) !important;}
.u-resetSpectrum .u-baseColor--borderLight {border-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--borderNormal {border-color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--borderDark {border-color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--iconLight .svgIcon,.u-resetSpectrum .u-baseColor--iconLight.svgIcon {fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--iconNormal .svgIcon,.u-resetSpectrum .u-baseColor--iconNormal.svgIcon {fill: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--iconDark .svgIcon,.u-resetSpectrum .u-baseColor--iconDark.svgIcon {fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textNormal {color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textDark {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--backgroundLight {background-color: rgba(0, 0, 0, 0.09803921568627451) !important;}
.u-resetSpectrum .u-baseColor--backgroundNormal {background-color: rgba(0, 0, 0, 0.2) !important;}
.u-resetSpectrum .u-baseColor--backgroundDark {background-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight {border-color: rgba(0, 0, 0, 0.2980392156862745) !important; color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight:hover {border-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight .icon:before,.u-resetSpectrum .u-baseColor--buttonLight .svgIcon {color: rgba(0, 0, 0, 0.2980392156862745) !important; fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonDark {border-color: rgba(0, 0, 0, 0.6) !important; color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonDark:hover {border-color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--buttonDark .icon:before,.u-resetSpectrum .u-baseColor--buttonDark .svgIcon {color: rgba(0, 0, 0, 0.6) !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal {border-color: rgba(0, 0, 0, 0.4980392156862745) !important; color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal:hover {border-color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal .icon:before,.u-resetSpectrum .u-baseColor--buttonNormal .svgIcon {color: rgba(0, 0, 0, 0.4980392156862745) !important; fill: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonDark.button--filled,.u-resetSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: rgba(0, 0, 0, 0.2980392156862745) !important; border-color: rgba(0, 0, 0, 0.2980392156862745) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal.button--filled,.u-resetSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: rgba(0, 0, 0, 0.2) !important; border-color: rgba(0, 0, 0, 0.2) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-baseColor--link {color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--darken:hover,.u-resetSpectrum .u-baseColor--link.link--darken:focus,.u-resetSpectrum .u-baseColor--link.link--darken:active {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--dark {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:active {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--link.link--darker {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .svgIcon--logoNew path:nth-child(1) {stroke: none !important; fill: rgba(0, 0, 0, 0.2) !important;}
.u-resetSpectrum .svgIcon--logoNew path:nth-child(2) {stroke: none !important; fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .svgIcon--logoNew path:nth-child(3) {stroke: none !important; fill: rgba(0, 0, 0, 0.4) !important;}
.u-resetSpectrum .svgIcon--logoNew path:nth-child(4) {stroke: none !important; fill: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-accentColor--borderLight {border-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--borderNormal {border-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--borderDark {border-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--iconLight .svgIcon,.u-resetSpectrum .u-accentColor--iconLight.svgIcon {fill: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--iconNormal .svgIcon,.u-resetSpectrum .u-accentColor--iconNormal.svgIcon {fill: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--iconDark .svgIcon,.u-resetSpectrum .u-accentColor--iconDark.svgIcon {fill: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--textNormal {color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--hoverTextNormal:hover {color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--textDark {color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundLight {background-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundNormal {background-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundDark {background-color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark {border-color: rgba(0, 171, 107, 1) !important; color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark:hover {border-color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark .icon:before,.u-resetSpectrum .u-accentColor--buttonDark .svgIcon{color: rgba(28, 153, 99, 1) !important; fill: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal {border-color: rgba(2, 184, 117, 1) !important; color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal:hover {border-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal .icon:before,.u-resetSpectrum .u-accentColor--buttonNormal .svgIcon{color: rgba(0, 171, 107, 1) !important; fill: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-resetSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark.button--filled,.u-resetSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-resetSpectrum .u-accentColor--fillWhenActive.is-active {background-color: rgba(28, 153, 99, 1) !important; border-color: rgba(28, 153, 99, 1) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal.button--filled,.u-resetSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active {background-color: rgba(0, 171, 107, 1) !important; border-color: rgba(0, 171, 107, 1) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .postArticle.is-withAccentColors .markup--user,.u-resetSpectrum .postArticle.is-withAccentColors .markup--query {color: rgba(0, 171, 107, 1) !important;}</style><div class="highlightMenu highlightMenu--active" data-action-scope="_actionscope_3" style="left: 335px; top: 2038px;"><div class="highlightMenu-inner"><div class="buttonSet"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu u-accentColor--highlightStrong js-highlightMenuQuoteButton" data-action="sign-in-prompt" data-sign-in-action="quote" data-requires-token="true" data-redirect-type="quote" data-action-source="quote_menu"><span class="svgIcon svgIcon--highlighter svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M13.7 15.964l5.204-9.387-4.726-2.62-5.204 9.387 4.726 2.62zm-.493.885l-1.313 2.37-1.252.54-.702 1.263-3.796-.865 1.228-2.213-.202-1.35 1.314-2.37 4.722 2.616z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu " data-action="sign-in-prompt" data-sign-in-action="quote-respond" data-action-source="quote_menu"><span class="svgIcon svgIcon--responseFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M19.074 21.117c-1.244 0-2.432-.37-3.532-1.096a7.792 7.792 0 0 1-.703-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.662 0 8.457 3.5 8.457 7.803 0 2.058-.85 3.984-2.403 5.448.023.17.06.35.118.55.192.69.537 1.38 1.026 2.04.15.21.172.48.058.7a.686.686 0 0 1-.613.38h-.03z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu " data-action="twitter" data-action-source="quote_menu"><span class="svgIcon svgIcon--twitterFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><path d="M21.725 5.338c-.744.47-1.605.804-2.513 1.006a3.978 3.978 0 0 0-2.942-1.293c-2.22 0-4.02 1.81-4.02 4.02 0 .32.034.63.07.94-3.31-.18-6.27-1.78-8.255-4.23a4.544 4.544 0 0 0-.574 2.01c.04 1.43.74 2.66 1.8 3.38-.63-.01-1.25-.19-1.79-.5v.08c0 1.93 1.38 3.56 3.23 3.95-.34.07-.7.12-1.07.14-.25-.02-.5-.04-.72-.07.49 1.58 1.97 2.74 3.74 2.8a8.49 8.49 0 0 1-5.02 1.72c-.3-.03-.62-.04-.93-.07A11.447 11.447 0 0 0 8.88 21c7.386 0 11.43-6.13 11.414-11.414.015-.21.01-.38 0-.578a7.604 7.604 0 0 0 2.01-2.08 7.27 7.27 0 0 1-2.297.645 3.856 3.856 0 0 0 1.72-2.23"></path></svg></span></button><div class="buttonSet-separator"></div><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu " data-action="sign-in-prompt" data-sign-in-action="highlight" data-action-source="quote_menu"><span class="svgIcon svgIcon--privatenoteFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M17.662 4.552H7.346A4.36 4.36 0 0 0 3 8.898v5.685c0 2.168 1.614 3.962 3.697 4.28v2.77c0 .303.35.476.59.29l3.904-2.994h6.48c2.39 0 4.35-1.96 4.35-4.35V8.9c0-2.39-1.95-4.346-4.34-4.346zM16 14.31a.99.99 0 0 1-1.003.99h-4.994C9.45 15.3 9 14.85 9 14.31v-3.02a.99.99 0 0 1 1-.99v-.782a2.5 2.5 0 0 1 2.5-2.51c1.38 0 2.5 1.13 2.5 2.51v.782c.552.002 1 .452 1 .99v3.02z"></path><path d="M14 9.81c0-.832-.674-1.68-1.5-1.68-.833 0-1.5.84-1.5 1.68v.49h3v-.49z"></path></g></svg></span></button></div></div><div class="highlightMenu-arrowClip"><span class="highlightMenu-arrow"></span></div></div></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://engineering.circle.com","buildLabel":"28586-6143d83","currentUser":{"userId":"lo_fc0a5265417","isVerified":false,"subscriberEmail":""},"currentUserHasUnverifiedEmail":false,"isAuthenticated":false,"isCurrentUserVerified":false,"language":"en-us","mediumTwitterScreenName":"medium","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.AouowiblLn4SBKZF6cWDtA.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.4rYp3nph7xNXmlmak5XWxQ.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.R35emyz9xZL7YdHbIl-SvQ.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.XUyD-cfC9DG2nc9iq5x7GA.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.0oM8iNH9LgWeJY00O_ao2Q.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.caQfKUCZ18Wg2IbFBoaXiA.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":true,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1492314234437:1038cc8cccf","useragent":{"browser":"chrome","family":"chrome","os":"mac","version":57,"supportsDesktopEdit":true,"supportsInteract":true,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":true,"isTier1":true,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":true,"supportsVhUnits":true,"ruinsViewportSections":false,"supportsHtml5Video":true,"supportsMagicUnderlines":true,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":true,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":true,"supportsScrollableMetabar":true},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv","signup_services":"twitter,facebook,google,email,google-fastidv","android_rating_prompt_recommend_threshold":5,"google_sign_in_android":true,"enable_onboarding":true,"ios_custom_miro_url":"https://cdn-images-1.medium.com","reengagement_notification_duration":3,"enable_adsnative_integration":true,"browsable_stream_config_bucket":"curated-topics","ios_small_post_preview_truncation_length":5.5,"ios_large_post_preview_truncation_length":5.5,"disable_ios_catalog_badging":true,"enable_series_creation":true,"enable_your_series_pages":true,"enable_productionized_series":true,"enable_dedicated_series_tab_api_ios":true,"enable_clap_milestone_notifications":true,"enable_series_stats_page":true,"enable_prepublish_share_settings":true,"enable_direct_auth_connect":true,"enable_post_import":true,"enable_sponsored_post_labelling":true,"enable_logged_in_follow_on_collection_post":true,"promoted_story_placement_locations":"POST_PAGE_FOOTER","show_topics":true,"enable_search_collection_by_tag_recency_filter":true,"search_collection_by_tag_filter_min_votes":10,"enable_sms_app_promo":true,"enable_export_members":true,"enable_series_card_background_creation":true,"enable_loyal_writers_onboarding":true,"enable_onboarding_hybrid_users":true,"enable_onboarding_users_by_tag":true,"can_see_subscription_branding":true,"enable_subscriptions_landing_page":true,"enable_partner_program_landing_page":true,"enable_hide_broken_links":true,"enable_pay_for_custom_domain":true,"enable_promos_from_dynamo":true,"enable_promos_in_placement":true,"enable_series_promo_in_email":true,"enable_sms":true,"enable_series_in_user_profiles":true,"enable_new_logged_out_bento_operation":true,"enable_topic_brief_relations":true},"xsrfToken":"","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","teamName":"Team Medium","fp":{"/icons/favicon.svg":"https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":false,"domainCollectionSlug":"circle-engineering","algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico","faviconImageId":"1*W0nmth_X8nFKjn6BZ388UQ.png","fontSets":[{"id":1,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-base.by5Oi_VbnwEIvhnWIsuUjA.css"},{"id":4,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-base.g08Jj5TZPAiuPWj5YNUsSg.css"},{"id":6,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css"},{"id":7,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-latin-base.jMU532QDmysQMOINr-cr2A.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"2d85f8836fe35226\",\"ot-tracer-traceid\":\"61e9f2d5731d8afc\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","secret":"c14df7146e9052a1131f3c900c1f0644","token":"542599432471018|1JqjIwxSfY9jOt_KwjWEl1R7T6I","namespace":"medium-com","scope":{"default":["public_profile","email","user_friends"],"connect":["public_profile","email","user_friends"],"login":["public_profile","email","user_friends"],"share":["public_profile","email","user_friends","publish_actions"]},"smartPublishWhitelistedPublications":["bcc38c8f6edf","f3726e2a5878","828a270689e","81c7d351c056","f30e42fd7ff8","8bf1d7d3081b","d16afa0ae7c","d8f3f6ad9c31","e74de0cedea9","15f753907972","c8c6a6b01ebd","3412b9729488","2ce4bbcf83bb","544c7006046e","7bfcdbc6b30a","a268fd916824","458a773bccd2"],"instantArticles":{"published":true,"developmentMode":false}},"mailingListArchiveUploadSizeMb":2,"availableMembershipPlans":[],"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com"}
// ]]></script><script charset="UTF-8" src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js" async=""></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"315e548354a2","versionId":"188b44961ad4","creatorId":"8f1080f36160","creator":{"userId":"8f1080f36160","name":"Anders Brownworth","username":"anders94","createdAt":1461791363612,"lastPostCreatedAt":1480510993832,"imageId":"1*s2mHdFZ_LvU4XAwq8GckGQ.jpeg","backgroundImageId":"","bio":"Rethinking money @CirclePay | Co-taught the Blockchain class at MIT | Podcaster | Runner | Helicopter Pilot","twitterScreenName":"anders94","socialStats":{"userId":"8f1080f36160","usersFollowedCount":240,"usersFollowedByCount":500,"type":"SocialStats"},"social":{"userId":"lo_fc0a5265417","targetUserId":"8f1080f36160","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"},"homeCollection":{"id":"d28865909d24","name":"Circle Engineering","slug":"circle-engineering","tags":[],"creatorId":"a771addaab3d","description":"Thoughts, tips, and learnings from the Circle engineering team","shortDescription":"Thoughts, tips, and learnings from the Circle engineering…","image":{"imageId":"1*Sohlrcl_aYcw8jQ3-KLEKw.png","filter":"","backgroundSize":"","originalWidth":500,"originalHeight":500,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":89,"postCount":0,"activeAt":1491226621476},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":""},"logo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"twitterUsername":"circleeng","facebookPageName":"circlepay","domain":"engineering.circle.com","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Circle Engineering","description":"Thoughts, tips, and learnings from the Circle engineering team","backgroundImage":{},"logoImage":{"id":"1*E0Y-XmhR_7Er5dOWOAAHXQ@2x.png","originalWidth":280,"originalHeight":280,"alt":"Circle Engineering"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":10,"postIds":[]}}],"tintColor":"#FF00986F","lightText":true,"favicon":{"imageId":"1*Sohlrcl_aYcw8jQ3-KLEKw.png","filter":"","backgroundSize":"","originalWidth":500,"originalHeight":500,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF0C9B72","point":0},{"color":"#FF1B906B","point":0.1},{"color":"#FF228463","point":0.2},{"color":"#FF25795B","point":0.3},{"color":"#FF266D53","point":0.4},{"color":"#FF26614A","point":0.5},{"color":"#FF245441","point":0.6},{"color":"#FF214738","point":0.7},{"color":"#FF1C3A2E","point":0.8},{"color":"#FF162C23","point":0.9},{"color":"#FF0E1E17","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF00986F","point":0},{"color":"#FF38A57E","point":0.1},{"color":"#FF55B18C","point":0.2},{"color":"#FF6CBC9B","point":0.3},{"color":"#FF82C8A9","point":0.4},{"color":"#FF96D2B6","point":0.5},{"color":"#FFA9DDC4","point":0.6},{"color":"#FFBCE7D2","point":0.7},{"color":"#FFCEF1DF","point":0.8},{"color":"#FFE0FBEC","point":0.9},{"color":"#FFF1FFF9","point":1}],"backgroundColor":"#FF00986F"},"highlightSpectrum":{"colorPoints":[{"color":"#FFE1FAEC","point":0},{"color":"#FFDBF9E9","point":0.1},{"color":"#FFD5F9E6","point":0.2},{"color":"#FFCFF8E3","point":0.3},{"color":"#FFC9F8E0","point":0.4},{"color":"#FFC3F7DD","point":0.5},{"color":"#FFBCF7DB","point":0.6},{"color":"#FFB5F6D8","point":0.7},{"color":"#FFAEF6D5","point":0.8},{"color":"#FFA7F5D2","point":0.9},{"color":"#FF9FF5CF","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Circle Engineering","description":"Thoughts, tips, and learnings from the Circle engineering team","backgroundImage":{},"logoImage":{"id":"1*E0Y-XmhR_7Er5dOWOAAHXQ@2x.png","originalWidth":280,"originalHeight":280,"alt":"Circle Engineering"},"alignment":1,"layout":6},"type":"Collection"},"homeCollectionId":"d28865909d24","title":"HTTPS Authorized Certs with Node.js","detectedLanguage":"en","latestVersion":"188b44961ad4","latestPublishedVersion":"188b44961ad4","hasUnpublishedEdits":false,"latestRev":240,"createdAt":1461876931086,"updatedAt":1462231921230,"acceptedAt":0,"firstPublishedAt":1422986408000,"latestPublishedAt":1462002800070,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we…","bodyModel":{"paragraphs":[{"name":"2bb9","type":3,"text":"HTTPS Authorized Certs with Node.js","markups":[]},{"name":"8b7a","type":1,"text":"If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we could quickly add client x.509 certificate checking in just a few lines of code.","markups":[]},{"name":"6ad8","type":1,"text":"Typically, HTTPS servers do a basic TLS handshake and accept any client connection as long as a compatible cipher suite can be found. However, the server can be configured to challenge the client with a CertificateRequest during the TLS handshake. This forces the client to present a valid certificate before the negotiation can continue. This strategy can be used in API services instead of (or in addition to) another form of identity such as shared secrets or OAuth.","markups":[{"type":1,"start":203,"end":221}]},{"name":"11b7","type":1,"text":"Here’s some background on how Client-authenticated TLS Handshakes work over at Wikipedia.","markups":[{"type":3,"start":30,"end":65,"href":"http://en.wikipedia.org/wiki/Transport_Layer_Security#Client-authenticated_TLS_handshake","title":"","rel":"","anchorType":0}]},{"name":"8947","type":3,"text":"From Scratch","markups":[]},{"name":"8c74","type":1,"text":"Let’s walk through the process of creating certificates and build an HTTPS server and client to use them. First we’ll build a Certificate Authority to sign our own client certificates. (let’s also use it to sign our server certificate so we don’t have to pay a public certificate authority!)","markups":[]},{"name":"077b","type":1,"text":"To simplify the configuration, let’s grab the following CA configuration file.","markups":[]},{"name":"476b","type":8,"text":"wget https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/ca.cnf","markups":[{"type":3,"start":5,"end":91,"href":"https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/ca.cnf","title":"","rel":"","anchorType":0}]},{"name":"aa44","type":1,"text":"Next, we’ll create a new certificate authority using this configuration.","markups":[]},{"name":"49ac","type":8,"text":"openssl req -new -x509 -days 9999 -config ca.cnf -keyout ca-key.pem -out ca-crt.pem","markups":[]},{"name":"47b2","type":1,"text":"Now that we have our certificate authority in ca-key.pem and ca-crt.pem, let’s generate a private key for the server.","markups":[{"type":2,"start":46,"end":56},{"type":2,"start":61,"end":71}]},{"name":"95a5","type":8,"text":"openssl genrsa -out server-key.pem 4096","markups":[]},{"name":"78aa","type":1,"text":"Our next move is to generate a certificate signing request. Again to simplify configuration, let’s use server.cnf as a configuration shortcut.","markups":[{"type":2,"start":103,"end":113}]},{"name":"d589","type":8,"text":"wget https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/server.cnf","markups":[{"type":3,"start":5,"end":95,"href":"https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/server.cnf","title":"","rel":"","anchorType":0}]},{"name":"0b21","type":1,"text":"Now we’ll generate the certificate signing request.","markups":[]},{"name":"864c","type":8,"text":"openssl req -new -config server.cnf -key server-key.pem -out server-csr.pem","markups":[]},{"name":"6be9","type":1,"text":"Now let’s sign the request.","markups":[]},{"name":"bddc","type":8,"text":"openssl x509 -req -extfile server.cnf -days 999 -passin \"pass:password\" -in server-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out server-crt.pem","markups":[]},{"name":"b76a","type":1,"text":"Our server certificate is all set and ready to go!","markups":[]},{"name":"c962","type":3,"text":"Server","markups":[]},{"name":"6c7b","type":1,"text":"Next, let’s build a basic HTTPS server using the certificate and listen on 0.0.0.0:4433. This is your standard HTTPS server in Node.js.","markups":[]},{"name":"f00a","type":8,"text":"var fs = require('fs'); \nvar https = require('https'); \nvar options = { \n    key: fs.readFileSync('server-key.pem'), \n    cert: fs.readFileSync('server-crt.pem'), \n    ca: fs.readFileSync('ca-crt.pem'), \n}; ","markups":[]},{"name":"e567","type":8,"text":"https.createServer(options, function (req, res) { \n    console.log(new Date()+' '+ \n        req.connection.remoteAddress+' '+ \n        req.method+' '+req.url); \n    res.writeHead(200); \n    res.end(\"hello world\\n\"); \n}).listen(4433);","markups":[]},{"name":"4dcf","type":1,"text":"You can check that this works in a browser. (don’t forget to tell your operating system to trust our newly created certificate authority by installing ca-crt.pem and marking it as trusted)","markups":[{"type":2,"start":151,"end":161}]},{"name":"e773","type":3,"text":"Client","markups":[]},{"name":"741f","type":1,"text":"Let’s create a Node.js client to connect to the server because that’s where we will be demonstrating the client certificate stuff.","markups":[]},{"name":"d9a2","type":8,"text":"var fs = require('fs'); \nvar https = require('https'); ","markups":[]},{"name":"4adb","type":8,"text":"var options = { \n    hostname: 'localhost', \n    port: 4433, \n    path: '/', \n    method: 'GET', \n    ca: fs.readFileSync('ca-crt.pem') \n}; ","markups":[]},{"name":"2302","type":8,"text":"var req = https.request(options, function(res) { \n    res.on('data', function(data) { \n        process.stdout.write(data); \n    }); \n}); ","markups":[]},{"name":"b40d","type":8,"text":"req.end();","markups":[]},{"name":"46eb","type":1,"text":"See what we did there? We added a line to the options that sets the certificate authority that the client will trust to our certificate authority’s public key. You can test that this works by running it and hopefully seeing “hello world” returned back.","markups":[]},{"name":"9cac","type":3,"text":"Client Certificates","markups":[]},{"name":"289b","type":1,"text":"Now, for the certificate on the client side, we’re going to need something that the client can present to our new server. Let’s make two of them while we’re at it.","markups":[]},{"name":"2473","type":8,"text":"openssl genrsa -out client1-key.pem 4096","markups":[]},{"name":"378f","type":8,"text":"openssl genrsa -out client2-key.pem 4096","markups":[]},{"name":"20b0","type":1,"text":"We’ll use config files again to save us some typing.","markups":[]},{"name":"6f15","type":8,"text":"wget https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client1.cnf","markups":[{"type":3,"start":5,"end":96,"href":"https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client1.cnf","title":"","rel":"","anchorType":0}]},{"name":"b026","type":8,"text":"wget https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client2.cnf","markups":[{"type":3,"start":5,"end":96,"href":"https://raw.githubusercontent.com/anders94/https-authorized-clients/master/keys/client2.cnf","title":"","rel":"","anchorType":0}]},{"name":"f39a","type":1,"text":"Now let’s create a pair of certificate signing requests.","markups":[]},{"name":"3e02","type":8,"text":"openssl req -new -config client1.cnf -key client1-key.pem -out client1-csr.pem","markups":[]},{"name":"edcc","type":8,"text":"openssl req -new -config client2.cnf -key client2-key.pem -out client2-csr.pem","markups":[]},{"name":"28d2","type":1,"text":"And sign our two new client certs.","markups":[]},{"name":"c1ce","type":8,"text":"openssl x509 -req -extfile client1.cnf -days 999 -passin \"pass:password\" -in client1-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out client1-crt.pem","markups":[]},{"name":"2cdd","type":8,"text":"openssl x509 -req -extfile client2.cnf -days 999 -passin \"pass:password\" -in client2-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out client2-crt.pem","markups":[]},{"name":"ffc5","type":1,"text":"Just to make sure everything in the OpenSSL world worked as expected, let’s verify our certs. (you can do this with the server certificate as well if you like)","markups":[]},{"name":"a93d","type":8,"text":"openssl verify -CAfile ca-crt.pem client1-crt.pem","markups":[]},{"name":"b9f2","type":8,"text":"openssl verify -CAfile ca-crt.pem client2-crt.pem","markups":[]},{"name":"7901","type":1,"text":"We should get an “OK” if all is well.","markups":[]},{"name":"1889","type":3,"text":"Putting it all Together","markups":[]},{"name":"9a11","type":1,"text":"Now for the fun part. Let’s alter the server by setting requestCert and rejectUnauthorized to true in the options and adding a bit to the console.log line.","markups":[]},{"name":"a890","type":8,"text":"var fs = require('fs'); \nvar https = require('https'); ","markups":[]},{"name":"1537","type":8,"text":"var options = { \n    key: fs.readFileSync('server-key.pem'), \n    cert: fs.readFileSync('server-crt.pem'), \n    ca: fs.readFileSync('ca-crt.pem'), \n    requestCert: true, \n    rejectUnauthorized: true\n}; ","markups":[]},{"name":"cfe6","type":8,"text":"https.createServer(options, function (req, res) { \n    console.log(new Date()+' '+ \n        req.connection.remoteAddress+' '+ \n        req.socket.getPeerCertificate().subject.CN+' '+ \n        req.method+' '+req.url); \n    res.writeHead(200); \n    res.end(\"hello world\\n\"); \n}).listen(4433);","markups":[]},{"name":"b740","type":1,"text":"Now if you try to access your HTTPS server, you will probably be rejected because you aren’t presenting a valid client certificate. (in Node.js, you will get a socket hangup error because TLS won’t complete) Let’s add that to the client we were using by adding a key and cert to the options.","markups":[]},{"name":"d4e0","type":8,"text":"var fs = require('fs'); \nvar https = require('https'); ","markups":[]},{"name":"2940","type":8,"text":"var options = { \n    hostname: 'localhost', \n    port: 4433, \n    path: '/', \n    method: 'GET', \n    key: fs.readFileSync('client1-key.pem'), \n    cert: fs.readFileSync('client1-crt.pem'), \n    ca: fs.readFileSync('ca-crt.pem') }; ","markups":[]},{"name":"6b06","type":8,"text":"var req = https.request(options, function(res) { \n    res.on('data', function(data) { \n        process.stdout.write(data); \n    }); \n}); ","markups":[]},{"name":"8e36","type":8,"text":"req.end(); ","markups":[]},{"name":"707a","type":8,"text":"req.on('error', function(e) { \n    console.error(e); \n});","markups":[]},{"name":"9769","type":1,"text":"Now for the moment of truth. Run the above against your server and you should see ‘hello world’ echo back. Look at the log the server produced and you should see ‘client1’. The server has recognized the client and printed it’s “Common Name”!","markups":[]},{"name":"8cfb","type":1,"text":"Try changing the client to use the client2 certificate and you should see ‘client2’ in the server’s logging. Cool, eh?","markups":[]},{"name":"8acf","type":3,"text":"Certificate Revocation","markups":[]},{"name":"11f7","type":1,"text":"There is one more thing to do here. Let’s add the ability to revoke a client certificate without invalidating everything. To do this, we will create a Certificate Revocation List (CRL) and revoke the client2 certificate. The first time we’ll do this, we need to create an empty database:","markups":[]},{"name":"d835","type":8,"text":"touch ca-database.txt","markups":[]},{"name":"933b","type":1,"text":"Now let’s revoke client2’s certificate.","markups":[]},{"name":"c817","type":8,"text":"openssl ca -revoke client2-crt.pem -keyfile ca-key.pem -config ca.cnf -cert ca-crt.pem -passin 'pass:password'","markups":[]},{"name":"fef3","type":1,"text":"And we’ll update the CRL.","markups":[]},{"name":"8a8b","type":8,"text":"openssl ca -keyfile ca-key.pem -cert ca-crt.pem -config ca.cnf -gencrl -out ca-crl.pem -passin 'pass:password'","markups":[]},{"name":"87c5","type":1,"text":"Lastly, we’ll have to define crl in the options. Our new server will look like this.","markups":[{"type":1,"start":29,"end":32}]},{"name":"6f2c","type":8,"text":"var fs = require('fs'); \nvar https = require('https'); ","markups":[]},{"name":"1ff4","type":8,"text":"var options = { \n    key: fs.readFileSync('server-key.pem'), \n    cert: fs.readFileSync('server-crt.pem'), \n    ca: fs.readFileSync('ca-crt.pem'), \n    crl: fs.readFileSync('ca-crl.pem'), \n    requestCert: true, \n    rejectUnauthorized: true \n}; ","markups":[]},{"name":"40f6","type":8,"text":"https.createServer(options, function (req, res) { \n    console.log(new Date()+' '+ \n        req.connection.remoteAddress+' '+ \n        req.socket.getPeerCertificate().subject.CN+' '+ \n        req.method+' '+req.url); \n    res.writeHead(200); \n    res.end(\"hello world\\n\"); \n}).listen(4433);","markups":[]},{"name":"37a1","type":1,"text":"Now our server will respect the certificate revocation list so we should now see client2 rejected while client1 is still accepted!","markups":[]},{"name":"e692","type":1,"text":"How’s that for some new stealth ninja Node.js skills for ya?","markups":[]},{"name":"808b","type":1,"text":"We have seen how we can create self signed client (and server) certificates and ensure that clients interacting with our server only use valid certificates signed by us. Additionally, we can revoke any of the client certificates without having to revoke everything and rebuild from scratch. Because we can see the Common Name of the client certificates being presented and we know that they must be valid in order for us to see them, we can use this as a strategy to identify clients using our server.","markups":[]}],"sections":[{"name":"72d8","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"wordCount":1245,"imageCount":0,"readingTime":4.69811320754717,"subtitle":"If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we…","publishedInCount":1,"usersBySocialRecommends":[],"recommends":30,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"nodejs","name":"Nodejs","postCount":5536,"virtuals":{"isFollowing":false},"metadata":{"followerCount":9137,"postCount":5536,"coverImage":{"id":"1*Yp3Fe-wX6Mj33Z9RHIFTSg.png","originalWidth":809,"originalHeight":327,"isFeatured":true}},"type":"Tag"},{"slug":"javascript","name":"JavaScript","postCount":29558,"virtuals":{"isFollowing":false},"metadata":{"followerCount":32146,"postCount":29558,"coverImage":{"id":"1*mR7_k1mHMlsfc01qz-ZPiQ.png","originalWidth":8844,"originalHeight":4235}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":6,"links":{"entries":[],"version":"0.3","generatedAt":1471913604194},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"","totalClapCount":0},"coverless":true,"slug":"https-authorized-certs-with-node-js","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"http://engineering.circle.com/https-authorized-certs-with-node-js/","importedPublishedAt":1422986408000,"visibility":0,"uniqueSlug":"https-authorized-certs-with-node-js-315e548354a2","previewContent":{"bodyModel":{"paragraphs":[{"name":"2bb9","type":3,"text":"HTTPS Authorized Certs with Node.js","markups":[],"alignment":1},{"name":"8b7a","type":1,"text":"If you build Node.js HTTPS servers as much as we do, you’ll know how easy it is to get things going. But we were surprised to find that we could quickly add client x.509 certificate checking in just a few lines of code.","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2","approvedHomeCollectionId":"d28865909d24","approvedHomeCollection":{"id":"d28865909d24","name":"Circle Engineering","slug":"circle-engineering","tags":[],"creatorId":"a771addaab3d","description":"Thoughts, tips, and learnings from the Circle engineering team","shortDescription":"Thoughts, tips, and learnings from the Circle engineering…","image":{"imageId":"1*Sohlrcl_aYcw8jQ3-KLEKw.png","filter":"","backgroundSize":"","originalWidth":500,"originalHeight":500,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":89,"postCount":0,"activeAt":1491226621476},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":""},"logo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"twitterUsername":"circleeng","facebookPageName":"circlepay","domain":"engineering.circle.com","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Circle Engineering","description":"Thoughts, tips, and learnings from the Circle engineering team","backgroundImage":{},"logoImage":{"id":"1*E0Y-XmhR_7Er5dOWOAAHXQ@2x.png","originalWidth":280,"originalHeight":280,"alt":"Circle Engineering"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":10,"postIds":[]}}],"tintColor":"#FF00986F","lightText":true,"favicon":{"imageId":"1*Sohlrcl_aYcw8jQ3-KLEKw.png","filter":"","backgroundSize":"","originalWidth":500,"originalHeight":500,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF0C9B72","point":0},{"color":"#FF1B906B","point":0.1},{"color":"#FF228463","point":0.2},{"color":"#FF25795B","point":0.3},{"color":"#FF266D53","point":0.4},{"color":"#FF26614A","point":0.5},{"color":"#FF245441","point":0.6},{"color":"#FF214738","point":0.7},{"color":"#FF1C3A2E","point":0.8},{"color":"#FF162C23","point":0.9},{"color":"#FF0E1E17","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF00986F","point":0},{"color":"#FF38A57E","point":0.1},{"color":"#FF55B18C","point":0.2},{"color":"#FF6CBC9B","point":0.3},{"color":"#FF82C8A9","point":0.4},{"color":"#FF96D2B6","point":0.5},{"color":"#FFA9DDC4","point":0.6},{"color":"#FFBCE7D2","point":0.7},{"color":"#FFCEF1DF","point":0.8},{"color":"#FFE0FBEC","point":0.9},{"color":"#FFF1FFF9","point":1}],"backgroundColor":"#FF00986F"},"highlightSpectrum":{"colorPoints":[{"color":"#FFE1FAEC","point":0},{"color":"#FFDBF9E9","point":0.1},{"color":"#FFD5F9E6","point":0.2},{"color":"#FFCFF8E3","point":0.3},{"color":"#FFC9F8E0","point":0.4},{"color":"#FFC3F7DD","point":0.5},{"color":"#FFBCF7DB","point":0.6},{"color":"#FFB5F6D8","point":0.7},{"color":"#FFAEF6D5","point":0.8},{"color":"#FFA7F5D2","point":0.9},{"color":"#FF9FF5CF","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Circle Engineering","description":"Thoughts, tips, and learnings from the Circle engineering team","backgroundImage":{},"logoImage":{"id":"1*E0Y-XmhR_7Er5dOWOAAHXQ@2x.png","originalWidth":280,"originalHeight":280,"alt":"Circle Engineering"},"alignment":1,"layout":6},"type":"Collection"},"newsletterId":"","webCanonicalUrl":"https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2","mediumUrl":"https://engineering.circle.com/https-authorized-certs-with-node-js-315e548354a2","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"isSponsored":false,"isRequestToPubDisabled":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"type":"Post"},"mentionedUsers":[],"collaborators":[],"membershipPlans":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"8f1080f36160":{"userId":"8f1080f36160","name":"Anders Brownworth","username":"anders94","createdAt":1461791363612,"lastPostCreatedAt":1480510993832,"imageId":"1*s2mHdFZ_LvU4XAwq8GckGQ.jpeg","backgroundImageId":"","bio":"Rethinking money @CirclePay | Co-taught the Blockchain class at MIT | Podcaster | Runner | Helicopter Pilot","twitterScreenName":"anders94","socialStats":{"userId":"8f1080f36160","usersFollowedCount":240,"usersFollowedByCount":500,"type":"SocialStats"},"social":{"userId":"lo_fc0a5265417","targetUserId":"8f1080f36160","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"}},"Collection":{"d28865909d24":{"id":"d28865909d24","name":"Circle Engineering","slug":"circle-engineering","tags":[],"creatorId":"a771addaab3d","description":"Thoughts, tips, and learnings from the Circle engineering team","shortDescription":"Thoughts, tips, and learnings from the Circle engineering…","image":{"imageId":"1*Sohlrcl_aYcw8jQ3-KLEKw.png","filter":"","backgroundSize":"","originalWidth":500,"originalHeight":500,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":89,"postCount":0,"activeAt":1491226621476},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":""},"logo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"twitterUsername":"circleeng","facebookPageName":"circlepay","domain":"engineering.circle.com","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Circle Engineering","description":"Thoughts, tips, and learnings from the Circle engineering team","backgroundImage":{},"logoImage":{"id":"1*E0Y-XmhR_7Er5dOWOAAHXQ@2x.png","originalWidth":280,"originalHeight":280,"alt":"Circle Engineering"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":10,"postIds":[]}}],"tintColor":"#FF00986F","lightText":true,"favicon":{"imageId":"1*Sohlrcl_aYcw8jQ3-KLEKw.png","filter":"","backgroundSize":"","originalWidth":500,"originalHeight":500,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF0C9B72","point":0},{"color":"#FF1B906B","point":0.1},{"color":"#FF228463","point":0.2},{"color":"#FF25795B","point":0.3},{"color":"#FF266D53","point":0.4},{"color":"#FF26614A","point":0.5},{"color":"#FF245441","point":0.6},{"color":"#FF214738","point":0.7},{"color":"#FF1C3A2E","point":0.8},{"color":"#FF162C23","point":0.9},{"color":"#FF0E1E17","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF00986F","point":0},{"color":"#FF38A57E","point":0.1},{"color":"#FF55B18C","point":0.2},{"color":"#FF6CBC9B","point":0.3},{"color":"#FF82C8A9","point":0.4},{"color":"#FF96D2B6","point":0.5},{"color":"#FFA9DDC4","point":0.6},{"color":"#FFBCE7D2","point":0.7},{"color":"#FFCEF1DF","point":0.8},{"color":"#FFE0FBEC","point":0.9},{"color":"#FFF1FFF9","point":1}],"backgroundColor":"#FF00986F"},"highlightSpectrum":{"colorPoints":[{"color":"#FFE1FAEC","point":0},{"color":"#FFDBF9E9","point":0.1},{"color":"#FFD5F9E6","point":0.2},{"color":"#FFCFF8E3","point":0.3},{"color":"#FFC9F8E0","point":0.4},{"color":"#FFC3F7DD","point":0.5},{"color":"#FFBCF7DB","point":0.6},{"color":"#FFB5F6D8","point":0.7},{"color":"#FFAEF6D5","point":0.8},{"color":"#FFA7F5D2","point":0.9},{"color":"#FF9FF5CF","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Circle Engineering","description":"Thoughts, tips, and learnings from the Circle engineering team","backgroundImage":{},"logoImage":{"id":"1*E0Y-XmhR_7Er5dOWOAAHXQ@2x.png","originalWidth":280,"originalHeight":280,"alt":"Circle Engineering"},"alignment":1,"layout":6},"type":"Collection"}},"Social":{"8f1080f36160":{"userId":"lo_fc0a5265417","targetUserId":"8f1080f36160","type":"Social"}},"SocialStats":{"8f1080f36160":{"userId":"8f1080f36160","usersFollowedCount":240,"usersFollowedByCount":500,"type":"SocialStats"}}}})
// ]]></script><div class="surface-scrollOverlay"></div><script charset="UTF-8" src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/main-common-async.bundle.R35emyz9xZL7YdHbIl-SvQ.js"></script><script charset="UTF-8" src="./HTTPS Authorized Certs with Node.js – Circle Engineering_files/main-notes.bundle.AouowiblLn4SBKZF6cWDtA.js"></script></body></html>